<div *transloco="let t" class="flex items-baseline gap-2">
  <mat-form-field
    *ngrxLet="preferredGrease$ as preferredGrease"
    appearance="outline"
    class="grow"
  >
    <mat-label>{{
      t('shared.label.defaultSelect', {
        label: t('parameters.productPreselection.grease.label')
      })
    }}</mat-label>
    <mat-select
      [value]="preferredGrease?.selectedGrease"
      [compareWith]="compareOptions"
      [disabled]="isDisabled$ | ngrxPush"
      (selectionChange)="onPreferredGreaseSelectionChange($event.value)"
    >
      @if (defaultOption) {
        <mat-option [value]="defaultOption">
          {{ t(defaultOption.text) }}
        </mat-option>
      }
      <ng-container *ngrxLet="allGreases$ as allGreases">
        @for (optionGroup of allGreases; track optionGroup) {
          <mat-optgroup [label]="optionGroup.name">
            @for (
              option of removeEmptyOptions(optionGroup.entries);
              track option
            ) {
              <mat-option [value]="option">
                {{ option.text }}
              </mat-option>
            }
          </mat-optgroup>
        }
      </ng-container>
    </mat-select>
  </mat-form-field>
  <mat-icon
    class="cursor-help text-primary"
    #tooltip="matTooltip"
    [matTooltip]="t('parameters.productPreselection.grease.tooltip')"
    (click)="tooltip.toggle()"
  >
    info_outline
  </mat-icon>
</div>
