<ng-container *transloco="let t; read: 'viscosityIndexCalculator'">
  <div
    class="flex flex-row flex-wrap justify-between items-center pr-2 gap-2 gap-y-2"
  >
    <h2
      mat-dialog-title
      class="m-0 flex-1 min-w-0 break-words text-base sm:text-lg"
    >
      {{ t('title') }}
    </h2>
    <button
      mat-icon-button
      (click)="closeDialog()"
      class="shrink-0 flex items-center justify-center p-0 h-10 w-10 min-w-[40px]"
    >
      <mat-icon
        class="!flex items-center justify-center text-[24px] leading-none"
        >close</mat-icon
      >
    </button>
  </div>

  <mat-dialog-content>
    {{ t('description') }}
    <div class="py-4">
      <form [formGroup]="viForm" (ngSubmit)="onSubmit()" novalidate>
        <div class="flex flex-col">
          <mat-form-field appearance="outline" class="w-full mb-4">
            <mat-label>V 40째C</mat-label>
            <input
              matInput
              type="number"
              formControlName="v40"
              placeholder="{{ t('pleaseEnter', { label: 'V 40째C' }) }}"
            />
            <span matSuffix style="font-size: 0.8rem; margin-right: 0.3rem"
              >mm<sup>2</sup>/s</span
            >
            @if (formSubmitted && viForm.controls['v40'].hasError('required')) {
              <mat-error> {{ t('errors.required') }} </mat-error>
            }
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>V 100째C</mat-label>
            <input
              matInput
              type="number"
              formControlName="v100"
              placeholder="{{ t('pleaseEnter', { label: 'V 100째C' }) }}"
            />
            <span matSuffix style="font-size: 0.8rem; margin-right: 0.3rem"
              >mm<sup>2</sup>/s</span
            >
            @if (
              formSubmitted && viForm.controls['v100'].hasError('required')
            ) {
              <mat-error> {{ t('errors.required') }} </mat-error>
            }

            @if (
              formSubmitted &&
              viForm.controls['v100'].errors?.relativeValidatorError
            ) {
              <mat-error> {{ t('errors.v100Relative') }} </mat-error>
            }

            @if (formSubmitted && viForm.controls['v100'].hasError('min')) {
              <mat-error> {{ t('errors.v100Min') }} </mat-error>
            }
          </mat-form-field>

          <div
            class="vi-result-box"
            [ngClass]="
              formSubmitted && viWert !== undefined ? 'visible' : 'invisible'
            "
          >
            <mat-label
              class="text-title-medium text-high-emphasis mb-2 block"
              >{{ t('resultLabel') }}</mat-label
            >
            <div
              class="result-field text-title-large text-high-emphasis bg-primary-50 rounded-lg py-3 px-6 shadow-sm flex min-h-[3.5rem] tracking-wider"
            >
              {{ viWert !== undefined ? viWert : '-' }}
            </div>
          </div>
        </div>
      </form>
    </div>
  </mat-dialog-content>
</ng-container>
