<ng-container *transloco="let t; read: 'calculationResult'">
  <div class="flex h-full flex-col px-4">
    <schaeffler-subheader
      class="-mx-4"
      *ngrxLet="selectedBearing$ as selectedBearing"
      [hideLine]="true"
      [breakTitle]="true"
      (backButtonClicked)="navigateBack()"
    >
      <ng-container subheaderTitleContent>
        <span class="hidden sm:block">{{ t('title.main') }}&nbsp;</span>
        <span class="truncate">{{ selectedBearing }}</span>
        <mat-icon
          class="text-h5 text-link ml-2 !h-[24px] !w-[24px] cursor-help sm:ml-4 sm:!h-[28px] sm:!w-[28px] sm:!text-[28px]"
          #tooltip="matTooltip"
          [matTooltip]="t('title.247hint')"
          (click)="tooltip.toggle()"
        >
          info_outline
        </mat-icon>
        <button
          *ngIf="!isProduction"
          class="hover:bg-sky-700 hover:text-link ml-1"
          mat-fab
          color="accent"
          aria-label="generate report"
          (click)="generateReport(selectedBearing)"
        >
          <mat-icon class="align-middle">download</mat-icon>
        </button>
      </ng-container>
      <ng-container *ngIf="!(appIsEmbedded$ | ngrxPush)" subheaderInlineContent>
        <ga-medias-button
          class="max-sm:w-full"
          [bearing]="selectedBearing"
        ></ga-medias-button>
      </ng-container>
    </schaeffler-subheader>
    <div *ngIf="reportUrls; else loading_spinner">
      <div *ngIf="!isProduction" class="mb-4 flex w-full justify-end">
        <mat-slide-toggle
          color="primary"
          labelPosition="before"
          [(ngModel)]="showCompactView"
        >
          {{ t('showCompactView') }}
        </mat-slide-toggle>
      </div>
      <ga-grease-report
        #greaseReport
        *ngIf="showCompactView"
        [greaseReportUrl]="reportUrls.jsonReportUrl"
        [preferredGreaseResult]="preferredGreaseSelection$ | ngrxPush"
        [automaticLubrication]="automaticLubrication$ | ngrxPush"
      ></ga-grease-report>

      <schaeffler-html-report
        *ngIf="!showCompactView"
        [htmlReportUrl]="reportUrls.htmlReportUrl"
        [reportSelector]="reportSelector"
      >
      </schaeffler-html-report>
    </div>
    <ng-template #loading_spinner>
      <div class="flex flex-1 items-center justify-center">
        <mat-spinner diameter="50"></mat-spinner>
      </div>
    </ng-template>
  </div>
</ng-container>
