<ng-container *transloco="let t; read: 'calculationResult'">
  <div class="flex h-full flex-col px-4">
    @if (!(partnerVersion$ | ngrxPush)) {
      <ga-qualtrics-info-banner
        class="block mb-3 md:mb-6"
      ></ga-qualtrics-info-banner>
    }
    <schaeffler-subheader
      class="-mx-4"
      *ngrxLet="selectedBearing$ as selectedBearing"
      [hideLine]="true"
      [breakTitle]="true"
      (backButtonClicked)="navigateBack()"
    >
      <ng-container subheaderTitleContent>
        <span class="hidden sm:block">{{ t('title.main') }}&nbsp;</span>
        <span class="truncate">{{ selectedBearing }}</span>
        <mat-icon
          class="text-h5 text-link ml-2 !h-[24px] !w-[24px] cursor-help sm:ml-4 sm:!h-[28px] sm:!w-[28px] sm:!text-[28px]"
          #tooltip="matTooltip"
          [matTooltip]="t('title.247hint')"
          (click)="tooltip.toggle()"
        >
          info_outline
        </mat-icon>
      </ng-container>
      <ng-container subheaderInlineContent>
        <button
          class="ml-auto w-full sm:w-auto"
          mat-raised-button
          color="primary"
          aria-label="generate report"
          (click)="generateReport(selectedBearing)"
        >
          {{ t('pdfDownload') }}
          <mat-icon class="align-middle">download</mat-icon>
        </button>

        @if (!(appIsEmbedded$ | ngrxPush)) {
          <ga-medias-button
            class="max-sm:w-full ml-auto"
            [bearing]="selectedBearing"
            [partnerVersion]="partnerVersion$ | ngrxPush"
          ></ga-medias-button>
        }
      </ng-container>
    </schaeffler-subheader>
    @if (reportUrls) {
      <div>
        @if (!isProduction) {
          <div class="mb-4 flex w-full justify-end">
            <mat-slide-toggle
              color="primary"
              labelPosition="before"
              [(ngModel)]="showCompactView"
            >
              {{ t('showCompactView') }}
            </mat-slide-toggle>
          </div>
        }
        @if (showCompactView) {
          <ga-grease-report
            #greaseReport
            [greaseReportUrl]="reportUrls.jsonReportUrl"
            [preferredGreaseResult]="preferredGreaseSelection$ | ngrxPush"
            [automaticLubrication]="automaticLubrication$ | ngrxPush"
          ></ga-grease-report>
        }
        @if (!showCompactView) {
          <schaeffler-html-report
            [htmlReportUrl]="reportUrls.htmlReportUrl"
            [reportSelector]="reportSelector"
          >
          </schaeffler-html-report>
        }
      </div>
    } @else {
      <div class="flex flex-1 items-center justify-center">
        <mat-spinner diameter="50"></mat-spinner>
      </div>
    }
  </div>
</ng-container>
