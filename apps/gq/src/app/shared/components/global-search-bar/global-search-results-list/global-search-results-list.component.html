<ng-container *transloco="let t; read: 'searchBar'">
  <div *ngIf="gqCases?.length > 0; else emptyState">
    <p class="py-3 pl-4 text-overline uppercase text-medium-emphasis">
      {{ t('foundInOpenCases') }}
    </p>
    <div class="max-h-[400px] overflow-auto">
      <gq-global-search-results-item
        *ngFor="let case of gqCases | slice: 0:count"
        [searchResult]="case"
        (gqIdSelected)="gqIdSelected.emit(case)"
        (contextMenu)="showContextMenu($event, case)"
      ></gq-global-search-results-item>
    </div>
    <button
      color="primary"
      mat-button
      class="py-4 pl-4"
      [disabled]="count >= gqCases?.length"
      (click)="increaseCount()"
    >
      {{ t('showFiveMore') }}
    </button>
  </div>

  <ng-template #emptyState>
    <div class="flex flex-col items-center justify-center py-4">
      <img src="assets/png/empty_global_search_results.png" />
      <h6 class="text-h6 text-high-emphasis">
        {{ t('noResultsTitle') }}
      </h6>
      <span class="pt-2 text-subtitle-1 text-medium-emphasis">{{
        t('noResultsText')
      }}</span>
    </div>
  </ng-template>
</ng-container>

<div
  class="mat-menu-width"
  [style.visibility]="'hidden'"
  [style.position]="'fixed'"
  [style.left.px]="contextMenuPosition.x"
  [style.top.px]="contextMenuPosition.y"
  [matMenuTriggerFor]="contextMenu"
></div>
<mat-menu #contextMenu="matMenu">
  <ng-template matMenuContent let-item="item">
    <gq-open-in-tab (clicked)="openInTabClicked.emit(item)"></gq-open-in-tab>
    <gq-open-in-window
      (clicked)="openInWindowClicked.emit(item)"
    ></gq-open-in-window>
  </ng-template>
</mat-menu>
