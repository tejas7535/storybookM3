<mat-card
  appearance="outlined"
  class="!bg-transparent mat-elevation-z0 border-x-border border-y-border w-full grow rounded border-[1px]"
  *transloco="let t; read: 'shared.kpiStatusCard'"
>
  <mat-card-content>
    <div class="align-center items-center flex flex-row gap-2">
      @if (rating) {
        <div
          class="relative h-5 w-5 rounded-full"
          [ngClass]="{
            'bg-success-container': rating === ratingStatus.GOOD,
            'bg-error-container': rating === ratingStatus.LOW,
            'bg-warning-container': rating === ratingStatus.MEDIUM,
          }"
        >
          <div
            class="absolute left-1 top-1 h-3 w-3 rounded-full"
            [ngClass]="{
              'bg-success': rating === ratingStatus.GOOD,
              'bg-error': rating === ratingStatus.LOW,
              'bg-warning': rating === ratingStatus.MEDIUM,
            }"
          ></div>
        </div>
      }
      <mat-card-title class="!text-on-surface !gq-text-5 !leading-6">
        {{ title }}
        @if (warning) {
          <mat-icon
            [matTooltip]="warningInfo"
            matTooltipClass="whitespace-pre-line !text-body-small"
            class="!text-icon !text-icon-warning ml-[5px] cursor-help p-[1px] align-text-top"
            >warning_amber</mat-icon
          >
        }
      </mat-card-title>
    </div>
    @if (rating) {
      <div class="flow-row pt-2 flex gap-2">
        <span
          class="mat-mdc-card-subtitle !text-body-small"
          [ngClass]="{
            '!text-on-success-container': rating === ratingStatus.GOOD,
            '!text-on-error-container': rating === ratingStatus.LOW,
            '!text-on-warning-container': rating === ratingStatus.MEDIUM,
          }"
          >{{ t('status.' + ratingText) }}
        </span>
        <span class="mat-mdc-card-subtitle !text-body-small !opacity-[0.12]"
          >|</span
        >
        @if (subtitle) {
          <mat-card-subtitle class="!text-body-small !text-on-surface-variant">
            {{ subtitle }}
          </mat-card-subtitle>
        }
      </div>
    } @else {
      @if (subtitle) {
        <mat-card-subtitle
          class="!text-body-small pt-2 !text-on-surface-variant"
        >
          {{ subtitle }}
        </mat-card-subtitle>
      }
    }
    @if (kpiValue) {
      <mat-card-content
        class="!text-display-small !p-0 !pt-6"
        [ngClass]="{
          '!text-on-success-container': rating === ratingStatus.GOOD,
          '!text-on-error-container': rating === ratingStatus.LOW,
          '!text-on-warning-container': rating === ratingStatus.MEDIUM,
        }"
      >
        {{ kpiValue }}
      </mat-card-content>
    } @else {
      <div class="!pt-4">
        <ng-content> </ng-content>
      </div>
    }
  </mat-card-content>
</mat-card>
