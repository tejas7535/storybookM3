<div
  *transloco="let t; read: 'shared.editingModal'"
  class="flex h-full flex-col"
>
  <gq-dialog-header
    class="mb-8"
    [title]="
      t('title', {
        id: modalData()?.quotationDetail?.quotationItemId,
        fieldName: t(modalData().field),
      })
    "
    (closeDialog)="closeDialog()"
  >
  </gq-dialog-header>
  <!-- Customer Material Autocomplete -->
  @if (
    (customerMaterialsAreLoading$ | ngrxPush) || (updateLoading$ | ngrxPush)
  ) {
    <schaeffler-loading-spinner
      class="h-full mb-4"
      [relative]="true"
    ></schaeffler-loading-spinner>
  } @else {
    <form [formGroup]="customerMaterialForm">
      <gq-autocomplete-selection
        [label]="t(modalData().field)"
        [customDisplayFunction]="customerMaterialDisplay.bind(this)"
        [maxLength]="MAX_LENGTH"
        [allowOptionsValuesOnly]="false"
        [options]="materialNumberForEditMaterial$ | ngrxPush"
        [isLoading]="false"
        formControlName="customerMaterialNumber"
        [initalValue]="modalData().quotationDetail.customerMaterial"
        [defaultValueWhenEmptyInput]="defaultValueWhenEmptyInput$ | ngrxPush"
        [defaultValueWhenEmptyInputHint]="
          'shared.caseMaterial.addEntry.customerMaterial.defaultValueWhenEmptyInputHint'
            | transloco
        "
      ></gq-autocomplete-selection>
    </form>
    <!-- Action Buttons -->
    <div class="mt-4 flex justify-end gap-4">
      <button
        mat-button
        (click)="closeDialog()"
        [attr.data-cy]="modalData().field + '-modal_cancel-btn'"
      >
        <span> {{ t('cancel') }} </span>
      </button>
      <button
        mat-flat-button
        [disabled]="confirmButtonDisabled"
        (click)="confirmCustomerMaterialNumber()"
        [attr.data-cy]="modalData().field + '-modal_submit-btn'"
      >
        <span> {{ t('confirm.' + modalData().field) }} </span>
      </button>
    </div>
  }
</div>
