<div class="flex h-full flex-col">
  <nav
    class="bg-surface"
    mat-tab-nav-bar
    mat-stretch-tabs
    *transloco="let t"
    [tabPanel]="tabPanel"
  >
    @for (tab of tabs; track tab) {
      <a
        mat-tab-link
        queryParamsHandling="merge"
        routerLinkActive
        #rla="routerLinkActive"
        [routerLink]="tab.link"
        [active]="rla.isActive"
        [disabled]="tab.disabled"
        (contextmenu)="showContextMenu($event, tab)"
        >{{ t(tab.label) | uppercase }}
      </a>
    }
  </nav>
  <mat-tab-nav-panel #tabPanel class="grow">
    <router-outlet></router-outlet>
  </mat-tab-nav-panel>
</div>

<div
  class="mat-menu-width"
  [style.visibility]="'hidden'"
  [style.position]="'fixed'"
  [style.left.px]="contextMenuPosition.x"
  [style.top.px]="contextMenuPosition.y"
  [matMenuTriggerFor]="contextMenu"
></div>
<mat-menu #contextMenu="matMenu">
  <ng-template matMenuContent let-tab="tab">
    <gq-open-in-tab [url]="getUrl(tab)"></gq-open-in-tab>
    <gq-open-in-window [url]="getUrl(tab)"></gq-open-in-window>
  </ng-template>
</mat-menu>
