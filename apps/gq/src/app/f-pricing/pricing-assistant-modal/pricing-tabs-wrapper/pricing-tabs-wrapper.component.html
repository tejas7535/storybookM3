<ng-container *transloco="let t; read: 'fPricing.pricingAssistantModal'">
  <mat-tab-group
    mat-stretch-tabs="false"
    class="h-full"
    (selectedTabChange)="selectedTabChanged($event)"
  >
    <mat-tab>
      <ng-template mat-tab-label
        ><gq-tabs-label
          [value]="referencePrice | numberCurrency: currency:true"
          [title]="t('referencePricingLabel')"
        ></gq-tabs-label
      ></ng-template>
      <div class="p-2 h-full">
        <ng-container *ngIf="comparableTransactionsLoading"
          ><ng-template [ngTemplateOutlet]="loadingSpinner"></ng-template>
        </ng-container>
        <ng-container
          *ngIf="
            !comparableTransactionsLoading && !comparableTransactionsAvailable
          "
        >
          <gq-no-tabs-data
            [title]="t('referencePricingTable.noReferenceDataTitle')"
            [subTitle]="t('referencePricingTable.noReferenceDataSubTitle')"
          ></gq-no-tabs-data>
        </ng-container>

        <ng-container
          *ngIf="
            !comparableTransactionsLoading && comparableTransactionsAvailable
          "
        >
          <gq-reference-pricing-table
            [inputRowData]="referencePriceRowData"
            (comparedMaterialClicked)="onComparedMaterialClicked($event)"
          ></gq-reference-pricing-table
        ></ng-container>
      </div>
    </mat-tab>
    <mat-tab disabled>
      <ng-template mat-tab-label
        ><gq-tabs-label
          class="h-full"
          [isOperator]="true"
          [operatorText]="'+'"
        ></gq-tabs-label
      ></ng-template>
    </mat-tab>
    <mat-tab>
      <ng-template mat-tab-label
        ><gq-tabs-label
          [value]="marketValueDriversValue | numberCurrency: currency:true"
          [title]="t('marketValueDriversLabel')"
          [icon]="
            marketValueDriverWarning !== marketValueDriverWarningLevel.COMPLETE
              ? 'warning_amber'
              : ''
          "
          [iconColor]="
            marketValueDriverWarning ===
            marketValueDriverWarningLevel.INCOMPLETE
              ? 'text-orange'
              : marketValueDriverWarning === marketValueDriverWarningLevel.UNSET
              ? 'text-error'
              : ''
          "
          [iconTooltip]="
            marketValueDriverWarning ===
            marketValueDriverWarningLevel.INCOMPLETE
              ? t('marketValueDriversWarningTooltip')
              : marketValueDriverWarning === marketValueDriverWarningLevel.UNSET
              ? t('marketValueDriversErrorTooltip')
              : ''
          "
        ></gq-tabs-label
      ></ng-template>
      <div class="p-2 w-full absolute">
        <gq-market-value-driver
          [marketValueDriverItems]="marketValueDriverData"
          (questionsSelectionChanged)="
            marketValueDriverSelectionChanged($event)
          "
        ></gq-market-value-driver>
      </div>
    </mat-tab>
    <mat-tab disabled>
      <ng-template mat-tab-label
        ><gq-tabs-label
          class="h-full"
          [isOperator]="true"
          [operatorText]="'+'"
        ></gq-tabs-label
      ></ng-template>
    </mat-tab>
    <mat-tab>
      <ng-template mat-tab-label
        ><gq-tabs-label
          [value]="technicalValueDriversValue | numberCurrency: currency:true"
          [title]="t('technicalValueDriversLabel')"
        ></gq-tabs-label
      ></ng-template>
      <div class="p-2 w-full absolute">
        <gq-technical-value-drivers-table
          [dataSource]="technicalValueDriversTableItems"
          (technicalValueDriversChange)="onTechnicalValueDriversChange($event)"
        ></gq-technical-value-drivers-table>
      </div>
    </mat-tab>
    <mat-tab disabled>
      <ng-template mat-tab-label
        ><gq-tabs-label
          class="h-full"
          [isOperator]="true"
          [operatorText]="'-'"
        ></gq-tabs-label
      ></ng-template>
    </mat-tab>
    <mat-tab>
      <ng-template mat-tab-label
        ><gq-tabs-label
          [value]="sanityCheckValue | numberCurrency: currency:true"
          [title]="t('sanityCheckLabel')"
        ></gq-tabs-label
      ></ng-template>
      <div class="p-2 w-full absolute">
        <gq-sanity-checks-table [dataSource]="sanityChecksDataSource">
        </gq-sanity-checks-table>
      </div>
    </mat-tab>

    <mat-tab disabled>
      <ng-template mat-tab-label
        ><gq-tabs-label
          class="h-full"
          [isOperator]="true"
          [operatorText]="'='"
        ></gq-tabs-label
      ></ng-template>
    </mat-tab>
    <mat-tab disabled>
      <ng-template mat-tab-label
        ><gq-tabs-label
          [value]="finalPrice | numberCurrency: currency:true"
          [title]="t('finalPriceLabel')"
        ></gq-tabs-label
      ></ng-template>
    </mat-tab>
  </mat-tab-group>
</ng-container>

<ng-template #loadingSpinner>
  <schaeffler-loading-spinner></schaeffler-loading-spinner>
</ng-template>
