<gq-filter-pricing-card
  *transloco="let t; read: 'detailView.filterPricing.manualPrice'"
  [title]="t('title')"
  [isDisabled]="
    !userHasManualPriceRole ||
    !manualPriceFormControl?.value ||
    manualPriceFormControl?.value ===
      quotationDetail.recommendedPrice?.toString()
  "
  [isSelected]="
    manualPriceFormControl?.value === quotationDetail.price?.toString() &&
    quotationDetail.priceSource === PriceSource.MANUAL
  "
  (selectManualPrice)="selectPrice()"
  [isLoading]="isLoading"
>
  <div class="flex w-full flex-col flex-wrap sm:flex-row" content>
    <div class="min-w-[8rem] max-w-[25%] grow pt-4">
      <div class="mb-1 text-body-2 text-medium-emphasis">
        <span>{{ t('label') }}</span
        ><span *ngIf="editMode"> ({{ currency }})</span>
        <span>:</span>
      </div>
      <div>
        <div class="flex-1" *ngIf="!editMode; else editing">
          <span class="font-bold">{{ price | numberCurrency: currency }}</span>
          <span *ngIf="!price" class="font-bold"> {{ currency }}</span>
          <mat-icon
            *ngIf="userHasManualPriceRole"
            class="ml-1 cursor-pointer align-bottom !text-body-1 !leading-6 text-medium-emphasis"
            (click)="openEditing()"
            >mode_edit</mat-icon
          >
        </div>
        <ng-template #editing>
          <div class="flex-1" class="small-input">
            <mat-form-field content appearance="outline">
              <input
                [formControl]="manualPriceFormControl"
                (keydown)="onKeyPress($event, manualPrice)"
                (paste)="onPaste($event)"
                class="text-overline"
                matInput
                type="text"
                #manualPrice
              />
              <mat-hint>
                {{ t('hint') }}
              </mat-hint>
            </mat-form-field>
          </div>
        </ng-template>
      </div>
    </div>
    <div class="min-w-[8rem] pt-4" *ngIf="userHasGPCRole">
      <div class="mb-1 text-body-2 text-medium-emphasis">{{ t('gpi') }}:</div>
      <div>
        <span class="font-bold">{{ gpi || '-' }} %</span>
        <mat-icon
          class="ml-1 cursor-pointer align-bottom !text-body-1 !leading-6 text-medium-emphasis"
          (click)="openMarginEditing(true)"
          >mode_edit</mat-icon
        >
      </div>
    </div>
    <div class="min-w-[8rem] pt-4" *ngIf="userHasSQVRole">
      <div class="mb-1 text-body-2 text-medium-emphasis">{{ t('gpm') }}:</div>
      <div>
        <span class="font-bold">{{ gpm || '-' }} %</span>
        <mat-icon
          class="ml-1 cursor-pointer align-bottom !text-body-1 !leading-6 text-medium-emphasis"
          (click)="openMarginEditing(false)"
          >mode_edit</mat-icon
        >
      </div>
    </div>
    <div class="min-w-[8rem] pt-4">
      <div class="mb-1 text-body-2 text-medium-emphasis">
        {{ t('quantity') }}:
      </div>
      <gq-quantity-display
        [quotationDetail]="quotationDetail"
      ></gq-quantity-display>
    </div>
    <div class="min-w-[8rem] pt-4">
      <div class="mb-1 text-body-2 text-medium-emphasis">
        {{ t('priceUnit') }}:
      </div>
      <div>
        <span class="font-bold">{{
          quotationDetail.material.priceUnit | number
        }}</span>
      </div>
    </div>
  </div>
</gq-filter-pricing-card>
