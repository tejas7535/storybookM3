<div
  *transloco="let t; read: 'detailView.pricingDetails.productionCostDetails'"
>
  <gq-kpi-status-card [title]="t('title')">
    @if (quotationDetail) {
      <div>
        @if (userHasGPCRole && userHasSQVRole) {
          <span class="absolute right-4 top-5">
            @if (materialCostUpdateAvl) {
              <mat-icon
                (click)="updateCosts()"
                [ngClass]="
                  refreshEnabled
                    ? 'text-on-surface-variant cursor-pointer hover:text-approval-status-green'
                    : 'text-on-surface opacity-[0.38]'
                "
                class="!w-4 !h-4 !text-[16px]"
                [matTooltip]="refreshButtonTooltipText"
              >
                refresh</mat-icon
              >
            } @else {
              <mat-icon
                class="!w-4 !h-4 !text-[16px] text-approval-status-green"
                [matTooltip]="t('costsUpToDate')"
                >check_circle</mat-icon
              >
            }
          </span>
        }
        @if (userHasGPCRole) {
          <gq-label-text>
            <span data-cy="gpc-label" label> {{ t('gpc') }}</span>
            <span data-cy="gpc-value" text>{{
              quotationDetail.gpc | numberCurrency: currency
            }}</span>
            @if (quotationDetail.gpc) {
              <ng-container text>
                @if (quotationDetail.gpcDate) {
                  <span>
                    {{ ' (' + (quotationDetail.gpcDate | translocoDate) + ')' }}
                  </span>
                } @else {
                  <span>{{
                    ' (' + (quotationDetail.gqCreated | translocoDate) + ')'
                  }}</span>
                }
              </ng-container>
            }
          </gq-label-text>
        }
        @if (userHasSQVRole) {
          <gq-label-text>
            <span data-cy="sqv-label" label>{{ t('sqv') }}</span>
            <span data-cy="sqv-value" text>{{
              quotationDetail.sqv | numberCurrency: currency
            }}</span>
            @if (quotationDetail.sqv) {
              <ng-container text>
                @if (quotationDetail.sqvDate) {
                  <span>
                    {{ ' (' + (quotationDetail.sqvDate | translocoDate) + ')' }}
                  </span>
                } @else {
                  <span>{{
                    ' (' + (quotationDetail.gqCreated | translocoDate) + ')'
                  }}</span>
                }
              </ng-container>
            }
          </gq-label-text>
        }
        <gq-label-text>
          <span data-cy="deliveryPlant-label" label>{{
            t('deliveryPlant')
          }}</span>
          <span data-cy="deliveryPlant-value" text>
            {{ quotationDetail.plant | plantDisplay }}</span
          >
        </gq-label-text>
        <gq-label-text>
          <span data-cy="productionPlant-label" label>{{
            t('productionPlant')
          }}</span>
          <span data-cy="productionPlant-value" text>
            {{ quotationDetail.productionPlant | plantDisplay }}</span
          >
        </gq-label-text>
        <gq-label-text [marginBottom]="false">
          <span data-cy="productionSegment-label" label>{{
            t('productionSegment')
          }}</span>
          <span data-cy="productionSegment-value" text>
            {{ quotationDetail.productionSegment | nullableString }}</span
          >
        </gq-label-text>
      </div>
    }
  </gq-kpi-status-card>
</div>

<!-- SqvDate and gpcYear was added in a later version,
      quotationDetails created before that feature was released will not have that property => the gqCreated will be shown instead-->
