@if (dataLoadingComplete$ | ngrxPush) {
  <div>
    @if (quotation$ | ngrxPush; as quotation) {
      <div>
        @if ((quotationDetail$ | ngrxPush)?.material; as material) {
          <schaeffler-subheader
            [subheaderTitle]="material | materialInfo"
            [breadcrumbs]="breadcrumbs$ | ngrxPush"
          >
            <ng-container subheaderStatusIcon>
              <schaeffler-tag
                [type]="tagType$ | ngrxPush"
                class="subheader-status-icon"
              ></schaeffler-tag>
            </ng-container>
            <ng-container subheaderTitleContent>
              <gq-detail-view-header-content
                [materialStock]="materialStock$ | ngrxPush"
                [materialStockLoading]="materialStockLoading$ | ngrxPush"
              ></gq-detail-view-header-content>
            </ng-container>
            <ng-container subheaderInlineContent>
              <schaeffler-share-button></schaeffler-share-button>
            </ng-container>
            <ng-container subheaderBlockContent>
              <gq-status-customer-info-header
                [customer]="quotation.customer"
                [sapStatus$]="sapStatusPosition$"
                [statusOfQuotation]="quotation.status"
                [errorCode]="(quotationDetail$ | ngrxPush)?.sapSyncErrorCode"
                [showStatus]="true"
              ></gq-status-customer-info-header>
            </ng-container>
          </schaeffler-subheader>
        }
      </div>
    }
    <div class="mx-4 mt-4 flex flex-col md:flex-row">
      <div class="w-full md:w-3/5">
        <gq-filter-pricing> </gq-filter-pricing>
        <ng-container *featureToggle="'fPricing'">
          <ng-container *transloco="let t; read: 'detailView.filterPricing'">
            @if (displayPricingAssistantButton$ | ngrxPush) {
              <div class="flex justify-end md:mr-4">
                <button
                  *ngrxLet="quotationDetail$ as quotationDetail"
                  class="!mt-2 w-[250px]"
                  mat-raised-button
                  color="primary"
                  (click)="openPricingAssistant(quotationDetail)"
                >
                  {{ t('pricingAssistantButton') }}
                </button>
              </div>
            }
          </ng-container>
        </ng-container>
      </div>
      <div class="mt-4 w-full md:mt-0 md:w-2/5">
        <gq-pricing-details
          [quotationDetail]="quotationDetail$ | ngrxPush"
          [plantMaterialDetails]="plantMaterialDetails$ | ngrxPush"
          [materialCostUpdateAvl]="materialCostUpdateAvl$ | ngrxPush"
          [rfqDataUpdateAvl]="rfqDataUpdateAvl$ | ngrxPush"
        >
        </gq-pricing-details>
      </div>
    </div>
  </div>
} @else {
  <schaeffler-loading-spinner></schaeffler-loading-spinner>
}

<ng-container *ngrxLet="quotationDetail$ as quotationDetail">
  @if (quotationDetail && quotations && quotations.length >= 2) {
    <gq-detail-view-navigation-bar
      [numberOfCases]="quotations.length"
      [selectedCaseIndex]="
        getSelectedQuotationIndex(quotationDetail.gqPositionId)
      "
      (navigateToCase)="onNavigateToQuotationByIndex($event)"
    ></gq-detail-view-navigation-bar>
  }
</ng-container>
