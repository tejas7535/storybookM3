@if (quotation$ | ngrxPush; as quotation) {
  <div class="flex h-full flex-col">
    <schaeffler-subheader
      [subheaderTitle]="
        quotation.caseName ? quotation.caseName : (quotation.gqId | gqQuotation)
      "
      [breadcrumbs]="breadcrumbs$ | ngrxPush"
    >
      <ng-container subheaderStatusIcon>
        <schaeffler-tag
          [type]="tagType$ | ngrxPush"
          class="subheader-status-icon"
        ></schaeffler-tag>
      </ng-container>
      <ng-container subheaderTitleContent>
        <div class="flex flex-row items-center">
          @if (quotation.sapId) {
            <span class="ml-4 text-on-surface opacity-[0.38]">{{
              quotation.sapId | sapQuotation
            }}</span>
          }
          <gq-header-content
            [quotation]="quotation"
            (updateQuotation)="updateQuotation($event)"
          ></gq-header-content>
        </div>
      </ng-container>
      <ng-container subheaderInlineContent>
        @if ((loggedInUserId$ | ngrxPush) !== quotation.gqCreatedByUser.id) {
          <gq-shared-quotation-button
            class="pr-4 !h-10"
            [quotationId]="quotation.gqId"
          ></gq-shared-quotation-button>
        }
        <schaeffler-share-button
          class="pr-1 !text-on-surface-variant"
        ></schaeffler-share-button>
        <gq-release-button [quotation]="quotation"></gq-release-button>
        <gq-cancel-workflow-button
          [quotationStatus]="quotation?.status"
        ></gq-cancel-workflow-button>
      </ng-container>
      <ng-container subheaderBlockContent>
        <gq-status-customer-info-header
          [customer]="quotation.customer"
          [sapStatus$]="sapStatus$"
          [statusOfQuotation]="quotation.status"
          [showStatus]="true"
        ></gq-status-customer-info-header>
      </ng-container>
    </schaeffler-subheader>
    <ng-container *ngrxLet="quotation$ as quotation">
      @if (
        (showCalcInProgress$ | ngrxPush) ||
        (quotationDetailDeletionInProgress$ | ngrxPush)
      ) {
        <gq-calculation-in-progress
          class="h-full"
          [amountDetails]="quotation.quotationDetails.length"
          [sapCallInProgress]="quotation.sapCallInProgress"
        >
        </gq-calculation-in-progress>
      } @else {
        <gq-tabs-header class="grow" [tabs]="tabs$ | ngrxPush"></gq-tabs-header>
      }
    </ng-container>
  </div>
} @else {
  <schaeffler-loading-spinner></schaeffler-loading-spinner>
}
