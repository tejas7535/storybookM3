<div
  class="flex h-full flex-col"
  *ngIf="
    !(isCustomerLoading$ | ngrxPush) && !(isQuotationLoading$ | ngrxPush);
    else loading
  "
>
  <mat-card
    class="border-b border-border !pt-0 !pb-9 !shadow-none"
    *ngIf="quotation$ | ngrxPush as quotation"
  >
    <schaeffler-subheader
      [title]="quotation.gqId | gqQuotation"
      [breadcrumbs]="breadcrumbs"
    >
      <ng-container titleContent>
        <span *ngIf="quotation.sapId" class="ml-4 pr-4 text-low-emphasis">{{
          quotation.sapId | sapQuotation
        }}</span>
        <gq-header-content [quotation]="quotation"></gq-header-content>
      </ng-container>
      <ng-container header>
        <schaeffler-share-button></schaeffler-share-button>
      </ng-container>
      <ng-container content>
        <gq-customer-header [customer]="quotation.customer">
        </gq-customer-header>
      </ng-container>
    </schaeffler-subheader>
  </mat-card>
  <mat-card
    class="m-4 mt-5 flex h-full"
    *ngIf="!(quotation$ | ngrxPush).calculationInProgress; else calcInProgress"
  >
    <gq-quotation-details-table
      *ngIf="!(isUpdateLoading$ | ngrxPush); else updateLoading"
      [quotation]="quotation$ | ngrxPush"
    ></gq-quotation-details-table>
    <ng-template #updateLoading>
      <schaeffler-loading-spinner></schaeffler-loading-spinner>
    </ng-template>
  </mat-card>
  <ng-template #calcInProgress>
    <gq-calculation-in-progress
      [amountDetails]="(quotation$ | ngrxPush).quotationDetails.length"
    >
    </gq-calculation-in-progress>
  </ng-template>
</div>
<ng-template #loading>
  <schaeffler-loading-spinner></schaeffler-loading-spinner>
</ng-template>
