<div
  class="flex h-full flex-col bg-secondary"
  *ngIf="
    !(customerLoading$ | ngrxPush) && !(quotationLoading$ | ngrxPush);
    else loading
  "
>
  <schaeffler-subheader
    *ngIf="quotation$ | ngrxPush as quotation"
    [subheaderTitle]="
      quotation.caseName ? quotation.caseName : (quotation.gqId | gqQuotation)
    "
    [breadcrumbs]="breadcrumbs$ | ngrxPush"
  >
    <ng-container subheaderStatusIcon>
      <div
        class="relative h-5 w-5 rounded-full bg-opacity-20"
        [ngClass]="{
          'bg-nordic-blue': (sapStatus$ | ngrxPush) === synced,
          'bg-gray-300': (sapStatus$ | ngrxPush) === notSynced,
          'bg-opacity-100': (sapStatus$ | ngrxPush) === notSynced,
          'bg-orange': (sapStatus$ | ngrxPush) === partiallySynced
        }"
      >
        <div
          class="absolute top-1 left-1 h-3 w-3 rounded-full"
          [ngClass]="{
            'bg-nordic-blue': (sapStatus$ | ngrxPush) === synced,
            'bg-low-emphasis': (sapStatus$ | ngrxPush) === notSynced,
            'bg-orange': (sapStatus$ | ngrxPush) === partiallySynced
          }"
        ></div>
      </div>
    </ng-container>

    <ng-container subheaderTitleContent>
      <div class="flex flex-row">
        <span *ngIf="quotation.sapId" class="ml-4 text-low-emphasis">{{
          quotation.sapId | sapQuotation
        }}</span>
        <gq-header-content
          [quotation]="quotation"
          (updateQuotation)="updateQuotation($event)"
        ></gq-header-content>
      </div>
    </ng-container>
    <ng-container subheaderInlineContent>
      <schaeffler-share-button></schaeffler-share-button>
    </ng-container>
    <ng-container subheaderBlockContent>
      <span
        class="pl-9 pt-2 text-caption"
        [ngClass]="{
          'text-info': (sapStatus$ | ngrxPush) === synced,
          'text-medium-emphasis': (sapStatus$ | ngrxPush) === notSynced,
          'text-orange': (sapStatus$ | ngrxPush) === partiallySynced
        }"
        *transloco="let t; read: 'shared.sapStatusLabels'"
      >
        <ng-container *ngIf="(sapStatus$ | ngrxPush) === synced">
          {{ t('synced') }}
        </ng-container>
        <ng-container *ngIf="(sapStatus$ | ngrxPush) === notSynced">
          {{ t('notSynced') }}
        </ng-container>
        <ng-container *ngIf="(sapStatus$ | ngrxPush) === partiallySynced">
          {{ t('partiallySynced') }}
        </ng-container>
      </span>
      <gq-customer-header
        [customer]="quotation.customer"
        [showDetailsButton]="false"
      >
      </gq-customer-header>
    </ng-container>
  </schaeffler-subheader>

  <gq-tabs-header class="grow" [tabs]="tabs"></gq-tabs-header>
</div>

<ng-template #loading>
  <schaeffler-loading-spinner></schaeffler-loading-spinner>
</ng-template>
