<form
  [formGroup]="formGroup"
  class="flex h-full flex-col"
  *transloco="
    let t;
    read: 'processCaseView.tabs.overview.approvalCockpit.approvalModal'
  "
>
  <gq-dialog-header
    [title]="
      t(
        modalData?.type === approvalModalType.APPROVE_CASE
          ? 'approveCase'
          : 'rejectCase'
      )
    "
    (closeDialog)="closeDialog()"
  ></gq-dialog-header>

  @if (
    (approvalFacade.updateApprovalWorkflowInProgress$ | ngrxPush) === false
  ) {
    <p class="text-title-small pt-4">{{ t('summary') }}</p>
    <div class="flex items-center pt-3">
      <p class="text-body-medium text-on-surface-variant">
        {{ t('approvalLevel') }}:
      </p>
      <span class="text-body-medium text-on-surface pl-2">{{
        approvalFacade.requiredApprovalLevelsForQuotation$ | ngrxPush
      }}</span>
    </div>
    <div class="pb-10 pt-7">
      <mat-form-field
        class="w-full"
        appearance="outline"
        [hideRequiredMarker]="formGroup.untouched"
      >
        <mat-label>{{ t('commentLabel') }}</mat-label>
        <textarea
          matInput
          (paste)="onPaste($event)"
          class="h-20 max-h-32 !leading-6"
          formControlName="comment"
          type="text"
          [maxlength]="INPUT_MAX_LENGTH"
          #comment
        ></textarea>
        @if (isInvalidInput) {
          <mat-hint class="text-error" align="start">
            {{ t('exceededCharactersError') }}
          </mat-hint>
        }
        <mat-hint align="end">
          {{ comment.value.length }} / {{ INPUT_MAX_LENGTH }}</mat-hint
        >
      </mat-form-field>
    </div>
    <div class="flex w-full justify-end gap-4">
      <button mat-button (click)="closeDialog()">
        {{ t('cancel') }}
      </button>
      <button
        mat-flat-button
        [disabled]="formGroup.invalid"
        (click)="updateApprovalWorkflow()"
      >
        {{
          t(
            modalData?.type === approvalModalType.APPROVE_CASE
              ? 'confirmApproval'
              : 'sendBack'
          )
        }}
      </button>
    </div>
  } @else {
    <div class="py-24">
      <schaeffler-loading-spinner
        class="h-full"
        [relative]="true"
      ></schaeffler-loading-spinner>
    </div>
  }
</form>
