<ng-container
  *transloco="
    let t;
    prefix: 'shared.rfqItemsTable.approvalProcesses.showHistory'
  "
>
  <gq-recalculation-progress
    [activeStep]="activeStep()"
    [cancelled]="rfq4Status() === rfq4StatusEnum.CANCELLED"
  ></gq-recalculation-progress>
  <gq-recalculation-data
    [quotationDetail]="quotationDetail()"
    [hasAssignee]="hasAssignee()"
    [assignee]="assignee()"
    [rfq4Status]="rfq4Status()"
    [processHistoryData]="processHistoryData()"
  ></gq-recalculation-data>
  <!--footer-->
  <div class="flex justify-between pt-4 gap-4">
    @if (quotationDetail().rfq4.rfq4Status === rfq4StatusEnum.IN_PROGRESS) {
      <button
        mat-button
        disableRipple
        class="noRippleHover error-with-opacity !text-error disabled:!text-on-surface-variant disabled:!opacity-[0.38]"
        (click)="triggerChangeProcess(recalculationProcessActionEnum.CANCEL)"
      >
        {{ t('cancelButton') }}
      </button>
    } @else if (
      quotationDetail().rfq4.rfq4Status === rfq4StatusEnum.CONFIRMED ||
      quotationDetail().rfq4.rfq4Status === rfq4StatusEnum.CANCELLED
    ) {
      <button
        mat-button
        [disabled]="
          !quotationDetail().rfq4.allowedToReopen ||
          quotationDetail().rfq4?.sqvApprovalStatus ===
            sqvApprovalStatusEnum.APPROVAL_NEEDED
        "
        (click)="triggerChangeProcess(recalculationProcessActionEnum.REOPEN)"
      >
        {{ t('reopenButton') }}
      </button>
    }

    <button mat-button (click)="cancelButtonClicked.emit()">
      {{ t('closeButton') }}
    </button>
  </div>
</ng-container>
