<div
  class="flex h-full flex-col overflow-y-auto overflow-x-hidden"
  *transloco="let t; read: 'caseView.caseCreation.createManualCase'"
>
  <gq-dialog-header
    [title]="title$ | ngrxPush"
    (closeDialog)="closeDialog()"
  ></gq-dialog-header>
  @if (!(createCaseLoading$ | ngrxPush)) {
    <div class="mt-8 flex h-full flex-col">
      <ng-container *ngrxLet="userHasOfferTypeAccess$ as userHasOfferType">
        <div
          class="flex gap-4 w-full"
          [ngClass]="{
            'flex-row': !userHasOfferType,
            'flex-col': userHasOfferType
          }"
        >
          @if (
            autocompleteFacade.createCaseCustomerAddEntry$ | ngrxPush;
            as customer
          ) {
            <gq-autocomplete-input
              class="w-full"
              [filterName]="customer.filter"
              [options]="customer.options"
              (unselected)="autocompleteFacade.unselectOptions(customer.filter)"
              (added)="
                autocompleteFacade.selectCustomer($event, customer.filter)
              "
              [autocompleteLoading]="
                autocompleteFacade.customerLoading$ | ngrxPush
              "
              (autocomplete)="autocompleteFacade.autocomplete($event)"
              (inputContent)="
                !$event
                  ? autocompleteFacade.unselectOptions(customer.filter)
                  : null
              "
            ></gq-autocomplete-input>
          }

          <div
            class="flex w-full gap-4"
            *ngrxLet="userHasOfferType ? 'w-1/4' : 'w-1/3' as width"
          >
            <gq-select-sales-org class="{{ width }}"></gq-select-sales-org>
            <gq-sector-gpsd-select
              class="{{ width }}"
              (sectorGpsdSelected)="sectorGpsdChanged($event)"
            ></gq-sector-gpsd-select>

            <gq-purchase-order-type-select
              class="{{ width }}"
              (purchaseOrderTypeSelected)="purchaseOrderTypeChanged($event)"
            ></gq-purchase-order-type-select>
            @if (userHasOfferType) {
              <gq-offer-type-select
                class="{{ width }}"
                (offerTypeSelected)="offerTypeChanged($event)"
              >
              </gq-offer-type-select>
            }
          </div></div
      ></ng-container>
      <div>
        <gq-add-entry [isCaseView]="true"> </gq-add-entry>
      </div>
      @if (rowData$ | ngrxPush; as rowData) {
        <div class="h-full min-h-[20rem] pb-4 lg:pb-0">
          <gq-material-input-table
            [rowData]="rowData"
            [isCaseView]="true"
          ></gq-material-input-table>
        </div>
      }
    </div>
  } @else {
    <schaeffler-loading-spinner></schaeffler-loading-spinner>
  }
</div>
