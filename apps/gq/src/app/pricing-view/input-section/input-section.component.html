<h3 class="column-header" *transloco="let t; read: 'pricingView.inputSection'">
  {{ t('search') }}
</h3>

<div
  fxLayoutAlign="start start"
  fxLayout="column"
  *ngIf="selectedFilter$ | async as selected"
>
  <gq-multi-select-input
    fxFill
    [filter]="selected"
    (removed)="removeOption($event, selected.filter)"
    (added)="addOption($event, selected.filter)"
    [autocompleteLoading]="(autocompleteLoading$ | async) === selected.filter"
    (autocomplete)="autocomplete($event)"
  ></gq-multi-select-input>

  <mat-form-field
    appearance="outline"
    class="input-field"
    *transloco="let t; read: 'pricingView.inputSection.dropdown'"
  >
    <mat-label>{{ t(selected.filter) }}</mat-label>
    <mat-select
      (selectionChange)="selectedFilterChange($event)"
      *ngIf="filterQueryInputs$ | async as queryInputs"
    >
      <mat-option *ngFor="let queryInput of queryInputs" [value]="queryInput">{{
        t(queryInput)
      }}</mat-option>
    </mat-select>
  </mat-form-field>
</div>

<ng-container
  *ngIf="
    (optionalFilters$ | async)?.length > 0 &&
    (optionalFilters$ | async) as optionalFilters
  "
>
  <h6 class="headline" *transloco="let t; read: 'pricingView.inputSection'">
    {{ t('optionalInformation') }}
  </h6>

  <div fxLayoutAlign="start start" fxLayout="column">
    <gq-multi-select-input
      fxFill
      *ngFor="let optional of optionalFilters; trackBy: trackByFn"
      [filter]="optional"
      (removed)="removeOption($event, optional.filter)"
      (added)="addOption($event, optional.filter)"
      [autocompleteLoading]="(autocompleteLoading$ | async) === optional.filter"
      (autocomplete)="autocomplete($event)"
    ></gq-multi-select-input>
  </div>
</ng-container>

<ng-container
  *ngIf="
    (materialNumberAndQuantities$ | async)?.length > 0 &&
    (materialNumberAndQuantities$ | async) as mandatoryFilters
  "
>
  <h6 class="headline" *transloco="let t; read: 'pricingView.inputSection'">
    {{ t('materialNumberAndQuantity') }}
  </h6>
  <div
    fxLayoutAlign="start start"
    fxLayout="column"
    *transloco="let t; read: 'pricingView.inputSection.inputSection'"
  >
    <gq-multi-select-input
      fxFill
      *ngFor="let mandatoryFilter of mandatoryFilters; trackBy: trackByFn"
      [filter]="mandatoryFilter"
      (removed)="removeOption($event, mandatoryFilter.filter)"
      (added)="addOption($event, mandatoryFilter.filter)"
      [autocompleteLoading]="
        (autocompleteLoading$ | async) === mandatoryFilter.filter
      "
      (autocomplete)="autocomplete($event)"
    ></gq-multi-select-input>
  </div>
</ng-container>
<br />
<button
  class="search-button"
  mat-stroked-button
  [disabled]="searchButtonDisabled$ | async"
  (click)="createQueries()"
  *transloco="let t; read: 'pricingView.inputSection'"
>
  {{ t('searchButton') }}
</button>
<button
  class="multiple-input-button"
  mat-stroked-button
  (click)="openDialog()"
  *transloco="let t; read: 'pricingView.inputSection'"
>
  {{ t('multipleInputButton') }}
</button>
