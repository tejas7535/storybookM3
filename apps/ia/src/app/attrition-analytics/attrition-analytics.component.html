<ng-container *transloco="let t">
  <div class="flex">
    <h5 class="font-bold">
      {{ t('attritionAnalytics.unforcedFluctuationAnalytics.title') }}
    </h5>
    <a
      mat-icon-button
      class="ml-auto self-center"
      aria-label="t('attritionAnalytics.unforcedFluctuationAnalytics.infoTooltip')"
      target="_blank"
      [href]="infoUrl"
      [matTooltip]="
        t('attritionAnalytics.unforcedFluctuationAnalytics.infoTooltip')
      "
    >
      <mat-icon>info</mat-icon>
    </a>
  </div>
  <ia-nav-buttons
    [items]="clusters$ | ngrxPush"
    [selectedTab]="selectedCluster$ | ngrxPush"
    (selectedTabChange)="onClusterSelected($event)"
  ></ia-nav-buttons>

  @if ((analyticsLoading$ | ngrxPush) || (clustersLoading$ | ngrxPush)) {
    <schaeffler-loading-spinner
      [relative]="true"
      [diameter]="64"
      [strokeWidth]="4"
    ></schaeffler-loading-spinner>
  }
  @if (
    !(analyticsLoading$ | ngrxPush) &&
    !(clustersLoading$ | ngrxPush) &&
    (!(employeeAnalytics$ | ngrxPush) ||
      (employeeAnalytics$ | ngrxPush).length === 0 ||
      !(clusters$ | ngrxPush) ||
      (clusters$ | ngrxPush).length === 0)
  ) {
    <div class="flex h-full justify-center items-center">
      <span>{{ t('shared.noData') }}</span>
    </div>
  } @else {
    @if (!(analyticsLoading$ | ngrxPush) && !(clustersLoading$ | ngrxPush)) {
      <ia-feature-analysis
        [barChartConfigs]="employeeAnalytics$ | ngrxPush"
        [loading]="
          (analyticsLoading$ | ngrxPush) || (clustersLoading$ | ngrxPush)
        "
      >
      </ia-feature-analysis>
    }
  }

  <div class="lg:col-span-2 col-span-4 flex flex-col gap-4"></div>
</ng-container>
