<div class="bg-surface p-4" *transloco="let t; read: 'attritionAnalytics'">
  <mat-card>
    <div class="flex flex-row">
      <h5 class="mb-5 font-bold">
        {{ t('unforcedFluctuationAnalytics.title') }}
      </h5>
      <mat-chip-list class="ml-24">
        <mat-chip
          color="secondary"
          selected
          disableRipple="true"
          selectable="false"
          class="after:!bg-transparent"
          (click)="$event.stopPropagation()"
          >Data-Set: Germany</mat-chip
        >
        <mat-chip
          color="secondary"
          selected
          disableRipple="true"
          selectable="false"
          class="after:!bg-transparent"
          (click)="$event.stopPropagation()"
          >Time-Range: 2021</mat-chip
        >
        <mat-chip
          color="secondary"
          selected
          disableRipple="true"
          selectable="false"
          class="after:!bg-transparent"
          (click)="$event.stopPropagation()"
          >Feature-Count:
          {{ (featureAnalysisSelectors$ | ngrxPush)?.length }}</mat-chip
        >
        <mat-chip
          color="secondary"
          selected
          disableRipple="true"
          selectable="false"
          class="after:!bg-transparent"
          (click)="$event.stopPropagation()"
          >{{ t('barChart.attritionRate') }}:
          {{ featureAnalysisOverallAttritionRate$ | ngrxPush }}%</mat-chip
        >
      </mat-chip-list>
    </div>

    <div class="flex flex-col gap-4">
      <ia-feature-analysis
        (selectFeatures)="onSelectedFeatures($event)"
        [barChartConfigs]="barChartConfigs$ | ngrxPush"
        [loading]="featureAnalysisLoading$ | ngrxPush"
        [allFeatureSelectors]="featureAnalysisSelectors$ | ngrxPush"
      ></ia-feature-analysis>
      <ia-feature-importance
        class="w-full"
        [loading]="featureImportanceLoading$ | ngrxPush"
        [hasNextFeatures]="featureImportanceHasNext$ | ngrxPush"
        [groups]="featureImportanceGroups$ | ngrxPush"
        [sortDirection]="featureImportanceSortDirection$ | ngrxPush"
        (loadNext)="loadNextFeatureImportance()"
        (toggleSort)="toggleSortFeatureImportance()"
      ></ia-feature-importance>
    </div>
  </mat-card>
</div>
