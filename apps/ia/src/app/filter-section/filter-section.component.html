<mat-accordion *transloco="let t; read: 'filters'">
  <mat-expansion-panel
    [expanded]="true"
    class="mat-elevation-z0"
    (opened)="expansionPanelToggled(true)"
    (closed)="expansionPanelToggled(false)"
  >
    <mat-expansion-panel-header>
      <mat-panel-title> {{ t('globalFilters') }} </mat-panel-title>
      <mat-panel-description *ngIf="!isExpanded">
        <ia-collapsed-filters
          [filters]="selectedFilterValues$ | ngrxPush"
        ></ia-collapsed-filters>
      </mat-panel-description>
    </mat-expansion-panel-header>
    <div class="mb-4 px-6">
      <ia-expanded-filters
        [orgUnitsFilter]="orgUnitsFilter$ | ngrxPush"
        [orgUnitsLoading]="orgUnitsLoading$ | ngrxPush"
        [selectedOrgUnit]="selectedOrgUnit$ | ngrxPush"
        [timePeriods]="timePeriods$ | ngrxPush"
        [selectedTimePeriod]="selectedTimePeriod$ | ngrxPush"
        [selectedTime]="selectedTime$ | ngrxPush"
        (selectOption)="optionSelected($event)"
        (selectTimePeriod)="timePeriodSelected($event)"
        (selectTimeRange)="timeRangeSelected($event)"
        (autoCompleteOrgUnits)="autoCompleteOrgUnitsChange($event)"
      >
      </ia-expanded-filters>
    </div>
  </mat-expansion-panel>
</mat-accordion>
