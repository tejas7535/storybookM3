<mat-card *transloco="let t; read: 'reasonsAndCounterMeasures'">
  <div class="flex justify-end">
    <a
      mat-raised-button
      class="cursor-pointer"
      target="_blank"
      matTooltipPosition="before"
      [matTooltip]="t('exitSurvey.tooltip')"
      [href]="exitSurveyURL"
    >
      <mat-icon>open_in_new</mat-icon>
      {{ t('exitSurvey.label') }}
    </a>
  </div>
  <h5 class="font-bold">
    {{ t('reasonsForLeaving.title') }}
  </h5>
  <ia-nav-buttons
    [items]="navItems"
    (selectedTabChange)="onSelectedTabChange($event)"
  ></ia-nav-buttons>
  <div class="grid w-full grid-cols-1 gap-4 p-4 lg:grid-cols-12">
    <div class="flex flex-col lg:col-span-6">
      <ia-reasons-for-leaving-chart
        side="left"
        [isLoading]="reasonsLoading$ | ngrxPush"
        [data]="reasonsChartData$ | ngrxPush"
        [children]="reasonsChildren$ | ngrxPush"
        [conductedInterviewsInfo]="conductedInterviewsInfo$ | ngrxPush"
        [selectedTab]="selectedTab$ | ngrxPush"
        (selectedReason)="onSelectedReason($event)"
      ></ia-reasons-for-leaving-chart>
      <ia-reasons-for-leaving-table
        class="xl:w-4/5"
        [data]="reasonsTableData$ | ngrxPush"
        [leaversData]="leaversData$ | ngrxPush"
        [leaversLoading]="leaversLoading$ | ngrxPush"
        [filters]="beautifiedFilters$ | ngrxPush"
        [timeRange]="timeRange$ | ngrxPush"
        [loading]="reasonsLoading$ | ngrxPush"
        (leaversRequested)="onLeaversRequested($event)"
        (toggleReasonAnalysis)="onToggleReasonAnalysis($event)"
      >
      </ia-reasons-for-leaving-table>
      <ia-general-questions-text-analysis
        class="xl:w-4/5"
        [data]="generalQuestionsData$ | ngrxPush"
        [loading]="reasonAnalysisLoading$ | ngrxPush"
      >
      </ia-general-questions-text-analysis>
    </div>
    <div class="flex flex-col lg:col-span-6">
      <ia-reasons-for-leaving-chart
        side="right"
        [isLoading]="comparedReasonsLoading$ | ngrxPush"
        [data]="comparedReasonsChartData$ | ngrxPush"
        [children]="comparedReasonsChildren$ | ngrxPush"
        [conductedInterviewsInfo]="comparedConductedInterviewsInfo$ | ngrxPush"
        [selectedTab]="selectedTab$ | ngrxPush"
        (selectedReason)="onSelectedComparedReason($event)"
      ></ia-reasons-for-leaving-chart>
      <ia-reasons-for-leaving-table
        class="xl:w-4/5 xl:ml-auto"
        [data]="comparedReasonsTableData$ | ngrxPush"
        [leaversData]="leaversData$ | ngrxPush"
        [leaversLoading]="leaversLoading$ | ngrxPush"
        [filters]="beautifiedFilters$ | ngrxPush"
        [timeRange]="timeRange$ | ngrxPush"
        [loading]="comparedReasonsLoading$ | ngrxPush"
        (leaversRequested)="onComparedLeaversRequested($event)"
        (toggleReasonAnalysis)="onComparedToggleReasonAnalysis($event)"
      >
      </ia-reasons-for-leaving-table>
      <ia-general-questions-text-analysis
        class="xl:w-4/5 ml-auto"
        [data]="comparedGeneralQuestionsData$ | ngrxPush"
        [loading]="comparedReasonAnalysisLoading$ | ngrxPush"
      >
      </ia-general-questions-text-analysis>
    </div>
  </div>
</mat-card>
