<div [ngClass]="{ 'my-4 mx-2': data.title }">
  @if (data.title) {
    <p class="text-subtitle-2 text-medium-emphasis">{{ data.title }}</p>
  }
  <div
    class="rounded-xl bg-disabled-overlay m-2 p-3 w-full h-full whitespace-normal"
  >
    @if (data.loading) {
      <ng-container [ngTemplateOutlet]="iaSparkles"></ng-container>
      <schaeffler-loading-spinner
        [diameter]="20"
        [strokeWidth]="2"
        [relative]="true"
      ></schaeffler-loading-spinner>
    } @else {
      <div class="flex">
        <div>
          @for (reason of data?.impacts; track $index) {
            @if (reason.title) {
              <p class="pb-2">
                <b>{{ reason.title }}</b
                >:&nbsp;{{ reason.description }}
              </p>
            } @else {
              <p class="pb-2">
                {{ reason.description }}
              </p>
            }
          }
        </div>
        <ng-container [ngTemplateOutlet]="iaSparkles"></ng-container>
      </div>
      @if (expanded) {
        @for (quote of data?.quotes; track $index) {
          <div class="bg-white border-l-2 border-info">
            <blockquote class="p-1 mb-2 rounded-sm">
              <i>"{{ quote }}"</i>
            </blockquote>
          </div>
        }
      }
      @if (data?.quotes && data?.quotes.length > 0) {
        <a
          mat-button
          color="primary"
          (click)="toggleExpand()"
          [innerHTML]="createButtonLabel()"
          >{{ createButtonLabel() }}</a
        >
      }
    }
  </div>

  <ng-template #iaSparkles>
    <div class="flex flex-1">
      <a
        class="ml-auto cursor-help w-4 h-4"
        [matTooltip]="'Summary generated by Schaeffler Chatbot'"
        [matTooltipPosition]="'above'"
        >&#10024;</a
      >
    </div>
  </ng-template>
</div>
