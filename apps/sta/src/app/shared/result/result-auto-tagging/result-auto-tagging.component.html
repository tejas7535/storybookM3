<mat-expansion-panel class="panel mat-elevation-z0" [expanded]="true">
  <mat-expansion-panel-header>
    <h6>Tags</h6>
  </mat-expansion-panel-header>

  <ng-container *ngIf="subsetTags && !(loadingTags$ | async)">
    <mat-form-field class="chip-list-wrapper">
      <mat-chip-list #chipList aria-label="Suggested Tags">
        <mat-chip
          *ngFor="let tag of subsetTags; trackBy: trackByFn; index as i"
          removable="true"
          (removed)="remove(tag)"
        >
          <mat-icon
            *ngIf="i < 3"
            class="icon chip-icon icon-left"
            fontIcon="icon-star"
          ></mat-icon>
          <span [ngClass]="{ 'icon-left-active': i < 3 }" class="chip-text">
            {{ tag }}
          </span>

          <mat-icon
            matChipRemove
            class="icon chip-icon icon-right"
            fontIcon="icon-cancel"
          ></mat-icon>
        </mat-chip>
        <input
          #tagInput
          placeholder="Suggested Tags"
          [matChipInputFor]="chipList"
          [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
          matChipInputAddOnBlur="true"
          (matChipInputTokenEnd)="add($event)"
        />
      </mat-chip-list>
    </mat-form-field>

    <div class="button-row" fxLayout="row" fxLayoutAlign="end center">
      <button
        mat-button
        (click)="showMoreTags()"
        [disabled]="showMoreTagsBtnDisabled"
        class="more-button"
      >
        <mat-icon class="icon" fontIcon="icon-cycle"></mat-icon>
        <span>
          MORE
        </span>
      </button>
      <button mat-button color="primary" (click)="copyToClipBoard()">
        <mat-icon>file_copy</mat-icon>
        <span>COPY</span>
      </button>
    </div>
  </ng-container>

  <ng-container *ngIf="!subsetTags && !(loadingTags$ | async)">
    <div fxLayout="column" fxLayoutAlign="center center" class="empty-state">
      <h3>Nothing has been tagged yet</h3>
      <img src="../../../../assets/empty-states/tagging.png" height="153px" />
      <p>
        Please add your text and click 'generate tags' or upload a file to start
        the tagging.
      </p>
    </div>
  </ng-container>

  <ng-container *ngIf="loadingTags$ | async">
    <div class="ghost" @fadeInAnimation>
      <sta-ghost-line-elements [numberOfLines]="7"></sta-ghost-line-elements>
      <div class="more-btn"></div>
      <div class="copy-btn"></div>
    </div>
  </ng-container>
</mat-expansion-panel>
