<ng-container *ngIf="isBearingSupported$ | ngrxPush; else legacyAppSelection">
  <ng-container *ngIf="isStandalone$ | ngrxPush; else appInner">
    <ng-container *ngIf="!isProduction; else standaloneProdPlaceholder">
      <schaeffler-app-shell
        [hasSidebarLeft]="true"
        [appTitle]="'appTitle' | transloco"
        [appTitleLink]="'/home'"
        [footerFixed]="false"
        [footerLinks]="footerLinks$ | ngrxPush"
        (onContentScroll)="containerScrollEvent$.next($event)"
      >
        <ng-container mainContent>
          <schaeffler-banner></schaeffler-banner>
          <div class="border-t border-border"></div>
          <router-outlet></router-outlet>
        </ng-container>
        <ng-container sidenavBody>
          <div class="px-5 py-4">
            <ea-settings-panel></ea-settings-panel>
          </div>
        </ng-container>
      </schaeffler-app-shell>
    </ng-container>
  </ng-container>
</ng-container>

<ng-template #legacyAppSelection>
  <ng-container *ngIf="isStandalone$ | ngrxPush; else legacyApp">
    <ng-container *ngIf="!isProduction; else standaloneProdPlaceholder">
      <ng-container *ngTemplateOutlet="legacyApp"></ng-container>
    </ng-container>
  </ng-container>
</ng-template>

<!-- adjust language code accordingly in the url-->
<ng-template #legacyApp>
  <div class="min-w-full py-8 px-2 bg-[#dde3e6]">
    <div class="max-w-[1200px] mx-auto">
      <ea-qualtrics-info-banner
        class="max-w-xl mx-auto"
        survey="legacy"
        [bearingDesingation]="bearingDesignation | ngrxPush"
      ></ea-qualtrics-info-banner>
    </div>
  </div>
  <iframe
    *ngIf="legacyAppUrl$ | ngrxPush as legacyAppUrl"
    class="w-full h-[100vh]"
    [attr.src]="legacyAppUrl"
  >
  </iframe>
</ng-template>

<ng-template #appInner>
  <!-- The max-w class forces the app to not overflow in medias. Paddings are taken from Medias. -->
  <schaeffler-banner></schaeffler-banner>
  <div
    class="flex h-full w-full flex-1 flex-col items-center relative"
    *transloco="let t"
    [ngClass]="{
      '!max-w-[calc(100vw-32px-40px-2px)]': (isStandalone$ | ngrxPush) === false
    }"
  >
    <div
      *ngIf="isStandalone$ | ngrxPush"
      id="title"
      class="text-medium-emphasis text-h4 md:py-10 py-4"
    >
      {{ t('appTitle') }}
    </div>
    <div class="md:flex md:flex-1 max-w-full">
      <ea-calculation-container
        [ngClass]="{ 'max-w-full': !isStandalone$ | ngrxPush }"
      ></ea-calculation-container>
    </div>
  </div>
</ng-template>

<!-- placeholder required before standalone version release-->
<ng-template #standaloneProdPlaceholder>
  <div class="flex flex-col items-center p-4 text-center">
    <h4 class="mb-4 text-high-emphasis">Under Construction</h4>
    <p class="text-subtitle-1 text-medium-emphasis">
      We are sorry, this content is coming soon.
    </p>
  </div>
</ng-template>
