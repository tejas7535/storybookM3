<ng-container *transloco="let t; read: 'calculationResult'">
  <div
    class="ea-flex ea-flex-shrink-0 ea-flex-col ea-items-center ea-justify-between md:ea-justify-center disabled-ea-border ea-border-border md:ea-border-0 md:ea-w-auto ea-py-2 md:ea-h-auto ea-h-full disabled-ea-bg-surface md:ea-bg-transparent ea-rounded-lg"
    [ngClass]="styleClass"
    *ngIf="_item"
  >
    <div
      class="ea-flex ea-flex-shrink-0 ea-flex-row ea-items-center ea-justify-center ea-px-2"
    >
      <mat-icon
        color="primary"
        [svgIcon]="_item.svgIcon"
        class="ea-mr-1 ea-flex-shrink-0"
      >
        {{ _item.icon }}
      </mat-icon>
      <div
        class="ea-text-caption ea-text-medium-emphasis ea-flex-shrink-0 ea-font-medium"
      >
        {{ t(_item.title) }}
      </div>
    </div>

    <div class="ea-flex ea-flex-row">
      <ng-container *ngFor="let value of _item.values; let last = last">
        <div
          class="ea-flex ea-flex-col md:ea-py-2 ea-px-4"
          [class.ea-items-center]="isSingleItem"
        >
          <div
            class="ea-text-caption ea-text-medium-emphasis ea-mb-2 ea-flex ea-flex-col"
            [class.ea-text-center]="isSingleItem"
          >
            {{ value.title && t(value.title) }}
          </div>

          <div
            class="ea-flex ea-flex-row ea-items-end ea-justify-start"
            *ngIf="!value.isLoading; else loading"
          >
            <ng-container *ngIf="!value.calculationError; else error">
              <div class="ea-text-body-2 ea-text-high-emphasis">
                {{ (value.value | meaningfulRound) || '-' }}
              </div>
              <div
                *ngIf="value.unit"
                class="ea-text-body-2 ea-text-high-emphasis ea-pl-1"
              >
                {{ value.unit }}
              </div>
            </ng-container>

            <ng-template #error>
              <div
                class="ea-flex ea-flex-shrink-0 ea-flex-grow"
                [matTooltip]="value.calculationError"
              >
                <mat-icon color="error" class="!ea-text-body-2 ea-mx-auto"
                  >warning</mat-icon
                >
              </div>
            </ng-template>
          </div>
        </div>
        <mat-divider [vertical]="true" *ngIf="!last"></mat-divider>
      </ng-container>
    </div>
  </div>
</ng-container>

<ng-template #loading>
  <div class="ea-flex ea-items-center ea-justify-center">
    <mat-spinner diameter="16"></mat-spinner>
  </div>
</ng-template>
