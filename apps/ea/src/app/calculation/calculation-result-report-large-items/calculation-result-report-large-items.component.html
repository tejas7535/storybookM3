<div
  *transloco="let t; read: translocoRoot"
  class="grid grid-cols-2 gap-0 px-4 md:px-8 py-4 border-border border-t"
>
  <ng-container
    *ngFor="
      let item of items;
      let index = index;
      first as isFirst;
      count as length;
      odd as isOdd;
      even as isEven;
      last as isLast
    "
  >
    <div
      class="flex flex-col justify-start border-border md:border-b-0 border-b md:mx-2 py-4 md:py-2"
      [ngClass]="{
        'md:mr-4 pl-4 md:pl-0': isEven,
        'md:border-r':
          length > 1 && isEven && (item.loadcaseValues?.length || 0) <= 4,
        'border-r-0': length > 1 && isEven && isLast,
        'md:mr-4 pr-4 md:pr-0': isOdd,
        'md:border-r-0':
          (length > 1 && isOdd && (item.loadcaseValues?.length || 0) <= 4) ||
          (item.loadcaseValues?.length || 0) > 4,
        'border-r': length > 1 && isOdd,
        'col-span-2 md:col-span-1 !pl-0': isFirst,
        'md:col-span-2': (item.loadcaseValues?.length || 0) > 4,
        'lg:border-r-0': (item.loadcaseValues?.length || 0) > 4 || isLast,
        'border-b-0': isLast || (length >= 2 && index === length - 2 && isOdd)
      }"
    >
      <div class="mb-4" *ngIf="item.short">
        <ea-tag
          *ngIf="!item.warning"
          [value]="item.short"
          styleClass="text-info bg-info border-info"
        ></ea-tag>
        <ea-tag
          *ngIf="item.warning"
          [value]="item.short"
          styleClass="text-warning bg-warning border-warning"
        ></ea-tag>
      </div>
      <div
        class="grid sm:grid-cols-2 grid-cols-1"
        [ngClass]="{
          'lg:grid-cols-4': item.loadcaseValues?.length < 5,
          'lg:grid-cols-5': item.loadcaseValues?.length === 5,
          'lg:grid-cols-6': item.loadcaseValues?.length > 5
        }"
      >
        <ng-container
          *ngIf="
            (item.loadcaseValues?.length || 0) === 0;
            else multipleLoadcases
          "
        >
          <div
            *ngIf="item.value !== undefined"
            class="flex flex-row items-end justify-start"
          >
            <div
              class="text-high-emphasis whitespace-nowrap"
              [ngClass]="{
                'text-h4 leading-9': isFirst && firstItemLarge,
                'text-h6': !isFirst || !firstItemLarge
              }"
            >
              {{ (item.value | meaningfulRound) || '-' }}
            </div>
            <div class="text-body-2 text-high-emphasis pl-1">
              {{ item.unit }}
            </div>
          </div>

          <div
            *ngIf="item.warning"
            class="flex flex-row items-center justify-start"
          >
            <div class="pr-1 text-icon-warning">
              <mat-icon>info_outline</mat-icon>
            </div>
            <div class="text-high-emphasis text-caption">
              {{ t(item.warning) }}
            </div>
          </div>
        </ng-container>
        <ng-template #multipleLoadcases>
          <div
            *ngFor="
              let loadcaseValue of item.loadcaseValues;
              first as isFirstValue;
              last as isLastValue;
              even as isEvenValue;
              odd as isOddValue;
              index as valueIndex;
              count as valuesLength
            "
            class="md:px-4 sm:pl-4 mb-2 lg:mb-0"
            [ngClass]="{
              'lg:!pl-0 md:pl-0 pl-0': isFirstValue,
              'md:pl-0 pl-0': isEvenValue,
              'md:pl-2 px-2': isEvenValue && valuesLength > 1,
              'sm:border-r sm:border-border': !isLastValue,
              'sm:border-r-0 border-r-0': isOddValue,
              'md:border-r-0 lg:border-r lg:border-border':
                isOddValue && !isLastValue,
              'md:px-2': valuesLength > 1,
              'md:!pl-0 sm:!pl-0': valuesLength > 1 && isEvenValue,
              'lg:!pl-4':
                valuesLength > 1 &&
                !isFirstValue &&
                !((valueIndex + 1) % 7 === 0),
              'lg:border-r-0': (valueIndex + 1) % 6 === 0,
              'lg:pl-0': (valueIndex + 1) % 7 === 0
            }"
          >
            <div
              class="text-caption !text-[8px] text-medium-emphasis mb-2"
              *ngIf="valuesLength > 1"
            >
              {{ loadcaseValue.loadcaseName }}
            </div>
            <div
              *ngIf="loadcaseValue.value !== undefined"
              class="flex flex-row items-end justify-start"
            >
              <div
                class="text-high-emphasis whitespace-nowrap"
                [ngClass]="{
                  'text-h4 leading-9': isFirst && firstItemLarge,
                  'text-h6': !isFirst || !firstItemLarge
                }"
              >
                {{ (loadcaseValue.value | meaningfulRound) || '-' }}
              </div>
              <div
                class="text-body-2 text-high-emphasis pl-1 whitespace-nowrap"
              >
                {{ item.unit }}
              </div>
            </div>
            <div
              *ngIf="item.warning"
              class="flex flex-row items-center justify-start"
            >
              <div class="pr-1 text-icon-warning">
                <mat-icon>info_outline</mat-icon>
              </div>
              <div class="text-high-emphasis text-caption">
                {{ t(item.warning) }}
              </div>
            </div>
          </div>
        </ng-template>
      </div>
      <div class="text-caption text-medium-emphasis lg:mt-4 mt-auto">
        {{ t(item.title) }}
        <ea-info-button
          class="inline-flex align-bottom"
          *ngIf="item.titleTooltip"
          [inline]="true"
          [tooltip]="item.titleTooltip"
        ></ea-info-button>
      </div>
    </div>
    <div
      class="border-t border-border my-4 h-[1px] col-span-2 md:block hidden"
      *ngIf="(isOdd || item.loadcaseValues?.length > 4) && !isLast"
    ></div>
  </ng-container>
</div>
