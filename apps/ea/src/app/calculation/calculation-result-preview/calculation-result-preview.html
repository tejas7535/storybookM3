<ng-container *transloco="let t; read: 'calculation'">
  <div
    class="ea-left-0 ea-flex ea-w-full ea-items-center ea-justify-center ea-overflow-hidden"
    [ngClass]="{'ea-fixed ea-bottom-0': sticky}"
  >
    <div
      class="ea-bg-background-dark ea-flex ea-flex-row ea-items-center ea-justify-center ea-gap-8 ea-rounded-t ea-pb-6 ea-pl-8 ea-pr-8 ea-pt-6"
    >
      <div class="ea-flex ea-flex-grow ea-flex-row ea-gap-8">
        <ng-container *ngIf="isCalculationMissingInput$ | ngrxPush">
          <div
            class="ea-flex ea-flex-shrink-0 ea-flex-row ea-items-center ea-justify-center"
          >
            <div class="ea-flex ea-flex-shrink-0">
              <mat-icon color="primary">info_outline</mat-icon>
            </div>
            <div
              class="ea-text-caption ea-text-high-emphasis ea-ml-2 ea-flex-shrink-0"
            >
              {{ t('calculationMissingInput') }}
            </div>
          </div>
          <mat-divider [vertical]="true"></mat-divider>
        </ng-container>

        <ng-container *ngIf="isCalculationImpossible$ | ngrxPush">
          <div class="ea-flex ea-flex-shrink-0 ea-flex-row ea-items-center">
            <div class="ea-flex ea-flex-shrink-0">
              <mat-icon color="error">warning</mat-icon>
            </div>
            <div
              class="ea-text-caption ea-text-high-emphasis ea-ml-2 ea-flex-shrink-0"
              [style]="{'max-width': '220px'}"
            >
              {{ t('calculationImpossible') }}
            </div>
          </div>
          <mat-divider [vertical]="true"></mat-divider>
        </ng-container>

        <ng-container *ngIf="overlayData$ | ngrxPush as overlayData">
          <ng-container *ngFor="let item of overlayData">
            <ea-calculation-result-preview-item
              [item]="item"
            ></ea-calculation-result-preview-item>
            <mat-divider [vertical]="true"></mat-divider>
          </ng-container>
        </ng-container>
      </div>

      <div class="ea-flex-shrink-0 ea-flex-grow">
        <button
          mat-raised-button
          color="primary"
          [disabled]="(isCalculationResultReportAvailable$ | ngrxPush) === false"
          (click)="showReport()"
        >
          <div class="ea-flex ea-items-center ea-justify-center">
            {{ t('showReport') }}
          </div>
        </button>
      </div>
    </div>
  </div>
</ng-container>
