<ng-container *transloco="let t; read: 'calculation'">
  <div
    class="fixed bottom-0 left-0 flex w-full items-center justify-center overflow-hidden"
  >
    <div
      class="flex flex-row items-center justify-center gap-8 rounded-t bg-background-dark pt-6 pb-6 pl-8 pr-8"
    >
      <div class="flex flex-grow flex-row gap-8">
        <ng-container *ngIf="isCalculationMissingInput$ | async">
          <div class="flex flex-shrink-0 flex-row items-center justify-center">
            <div class="flex flex-shrink-0">
              <mat-icon color="primary">info</mat-icon>
            </div>
            <div class="ml-2 flex-shrink-0 text-caption">
              {{ t('calculationMissingInput') }}
            </div>
          </div>
          <mat-divider [vertical]="true"></mat-divider>
        </ng-container>

        <ng-container *ngIf="isCalculationImpossible$ | async">
          <div class="flex flex-shrink-0 flex-row items-center">
            <div class="flex flex-shrink-0">
              <mat-icon color="error">warning</mat-icon>
            </div>
            <div
              class="ml-2 flex-shrink-0 text-caption"
              [style]="{'max-width': '220px'}"
            >
              {{ t('calculationImpossible') }}
            </div>
          </div>
          <mat-divider [vertical]="true"></mat-divider>
        </ng-container>

        <ng-container *ngIf="overlayData$ | async as overlayData">
          <ng-container *ngFor="let item of overlayData">
            <ea-calculation-result-preview-item
              [item]="item"
            ></ea-calculation-result-preview-item>
            <mat-divider [vertical]="true"></mat-divider>
          </ng-container>
        </ng-container>
      </div>

      <div class="flex-shrink-0 flex-grow">
        <button
          mat-raised-button
          color="primary"
          [disabled]="(isResultAvailable$ | async) !== true"
          (click)="calculate()"
        >
          {{ t('showReport') }}
        </button>
      </div>
    </div>
  </div>
</ng-container>
