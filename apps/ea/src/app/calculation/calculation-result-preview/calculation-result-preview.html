<ng-container *transloco="let t; read: 'calculation'">
  <div
    class="ea-left-0 ea-flex ea-w-full ea-items-center ea-justify-center ea-overflow-hidden"
    [ngClass]="{'md:ea-fixed ea-bottom-0': sticky}"
  >
    <div
      class="ea-bg-background-dark ea-flex ea-flex-row ea-items-center ea-justify-center ea-rounded-t ea-m-2 md:ea-m-0 ea-pt-4 ea-pb-2 ea-px-2 md:ea-py-4 md:ea-px-4"
    >
      <div
        class="ea-flex ea-flex-col md:ea-flex-row ea-flex-grow ea-gap-4 md:ea-gap-8 ea-items-center md:ea-min-w-0 ea-min-w-[90vw]"
      >
        <!-- Missing Input -->
        <ng-container *ngIf="isCalculationMissingInput$ | ngrxPush">
          <div
            class="ea-flex ea-flex-shrink-0 ea-flex-row ea-items-center ea-justify-center"
          >
            <div class="ea-flex ea-flex-shrink-0">
              <mat-icon color="primary">info_outline</mat-icon>
            </div>
            <div
              class="ea-text-caption ea-text-high-emphasis ea-ml-2 ea-flex-shrink-0"
            >
              {{ t('calculationMissingInput') }}
            </div>
          </div>
          <mat-divider
            class="ea-hidden md:ea-block"
            [vertical]="true"
          ></mat-divider>
        </ng-container>

        <!-- Calculation Impossible -->
        <ng-container *ngIf="isCalculationImpossible$ | ngrxPush">
          <div class="ea-flex ea-flex-shrink-0 ea-flex-row ea-items-center">
            <div class="ea-flex ea-flex-shrink-0">
              <mat-icon color="error">warning</mat-icon>
            </div>
            <div
              class="ea-text-caption ea-text-high-emphasis ea-ml-2 ea-flex-shrink-0"
              [style]="{'max-width': '220px'}"
            >
              {{ t('calculationImpossible') }}
            </div>
          </div>
          <mat-divider [vertical]="true"></mat-divider>
        </ng-container>

        <!-- Preview items -->
        <div
          *ngIf="overlayData$ | ngrxPush as overlayData"
          class="ea-flex ea-touch-pan-x ea-snap-x ea-snap-mandatory ea-flex-row ea-overflow-x-auto ea-max-w-[calc(100vw-2rem)] md:ea-max-w-auto md:ea-px-0 ea-px-[30vw]"
        >
          <ng-container *ngFor="let item of overlayData">
            <div class="ea-snap-center">
              <ea-calculation-result-preview-item
                [item]="item"
              ></ea-calculation-result-preview-item>
            </div>
            <mat-divider
              class="ea-hidden md:ea-block"
              [vertical]="true"
            ></mat-divider>
          </ng-container>
        </div>

        <!-- Report button -->
        <div
          class="ea-flex ea-flex-shrink-0 ea-flex-grow md:ea-flex md:ea-items-center ea-w-full md:ea-w-auto"
        >
          <button
            mat-raised-button
            color="primary"
            class="ea-grow md:ea-mx-0 ea-mx-4 md:ea-mr-4"
            [disabled]="(isCalculationResultReportAvailable$ | ngrxPush) === false"
            (click)="showReport()"
          >
            <div class="ea-flex ea-items-center ea-justify-center">
              {{ t('showReport') }}
            </div>
          </button>
        </div>
      </div>
    </div>
  </div>
</ng-container>
