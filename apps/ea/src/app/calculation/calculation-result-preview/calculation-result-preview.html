<ng-container *transloco="let t; read: 'calculation'">
  <div
    class="left-0 flex w-full items-center justify-center overflow-hidden box-border"
    [ngClass]="{'md:fixed bottom-0': sticky}"
  >
    <div
      class="bg-background-dark flex flex-row items-center justify-center rounded-t m-2 md:flex-grow-0 flex-grow md:m-0 pt-4 pb-2 px-2 md:py-2 md:px-4"
    >
      <div
        class="flex flex-col md:flex-row flex-grow gap-2 md:gap-8 items-center md:min-w-0"
      >
        <!-- Missing Input -->
        <ng-container *ngIf="isCalculationMissingInput$ | ngrxPush">
          <div class="flex flex-shrink-0 flex-row items-center justify-center">
            <div class="flex flex-shrink-0">
              <mat-icon color="primary">info_outline</mat-icon>
            </div>
            <div class="text-caption text-high-emphasis ml-2 flex-shrink-0">
              {{ t('calculationMissingInput') }}
            </div>
          </div>
          <mat-divider class="hidden md:block" [vertical]="true"></mat-divider>
        </ng-container>

        <!-- Calculation Impossible -->
        <ng-container *ngIf="isCalculationImpossible$ | ngrxPush">
          <div class="flex flex-shrink-0 flex-row items-center">
            <div class="flex flex-shrink-0">
              <mat-icon color="error">warning</mat-icon>
            </div>
            <div
              class="text-caption text-high-emphasis ml-2 flex-shrink-0"
              [style]="{'max-width': '220px'}"
            >
              {{ t('calculationImpossible') }}
            </div>
          </div>
          <mat-divider [vertical]="true"></mat-divider>
        </ng-container>

        <!-- Preview items -->
        <div
          *ngIf="overlayData$ | ngrxPush as overlayData"
          class="flex touch-pan-x snap-x snap-mandatory flex-row gap-2 overflow-x-auto md:max-w-auto md:px-0"
          [ngClass]="{'max-w-[calc(100vw-2rem)] px-[30vw]': sticky, 'max-w-[calc(100vw-2rem-4rem)] px-[25vw]': !sticky}"
        >
          <ng-container *ngFor="let item of overlayData">
            <div class="snap-center my-4 md:my-0">
              <ea-calculation-result-preview-item
                styleClass="w-[50vw]"
                [item]="item"
              ></ea-calculation-result-preview-item>
            </div>
            <mat-divider
              class="hidden md:block"
              [vertical]="true"
            ></mat-divider>
          </ng-container>
        </div>

        <!-- Report button -->
        <div
          class="flex flex-shrink-0 flex-grow md:flex md:items-center w-full md:w-auto"
        >
          <button
            mat-raised-button
            color="primary"
            class="grow md:mx-0 mx-4 md:mr-4"
            [disabled]="(isCalculationResultReportAvailable$ | ngrxPush) === false"
            (click)="showReport()"
          >
            <div class="flex items-center justify-center">
              {{ t('showReport') }}
            </div>
          </button>
        </div>
      </div>
    </div>
  </div>
</ng-container>
