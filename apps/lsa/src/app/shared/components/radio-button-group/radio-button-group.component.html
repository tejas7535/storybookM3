<div class="flex flex-col md:gap-6 gap-2">
  <ng-container
    *ngIf="(isMediumScreen$ | ngrxPush) || simplifiedMobile; else mobileView"
  >
    <mat-radio-group
      [formControl]="control"
      class="flex flex-wrap"
      (change)="onOptionSelected($event)"
    >
      <div
        class="flex mb-4 md:mb-0"
        *ngFor="let option of options; let last = last"
        [matTooltip]="option.tooltip"
      >
        <mat-radio-button
          [value]="option.value"
          color="primary"
          [disabled]="option.disabled"
          class="cursor-pointer"
        >
          {{ option.name }}
        </mat-radio-button>
        <mat-divider [vertical]="true" *ngIf="!last" class="mx-4"></mat-divider>
      </div>
    </mat-radio-group>
    <div
      class="flex flex-row gap-4"
      *ngIf="visibleTemplate$ | ngrxPush as visibleTemplate"
    >
      <ng-template *ngTemplateOutlet="visibleTemplate.ref"></ng-template>
    </div>
  </ng-container>
</div>

<ng-template #mobileView>
  <ng-container *ngIf="!simplifiedMobile">
    <mat-radio-group
      [formControl]="control"
      class="flex flex-wrap"
      (change)="onOptionSelected($event)"
      ><div class="flex flex-col gap-2 w-full">
        <div
          *ngFor="let option of options"
          class="bg-secondary-variant flex flex-col px-2 py-4 rounded-lg gap-4"
        >
          <mat-radio-button
            [value]="option.value"
            color="primary"
            [disabled]="option.disabled"
            class="cursor-pointer"
          >
            {{ option.name }}
          </mat-radio-button>
          <div
            class="flex flex-col gap-2"
            *ngIf="
              option.value === control?.value &&
              templateMap[option.templateRef]?.ref
            "
          >
            <ng-template
              *ngTemplateOutlet="templateMap[option.templateRef].ref"
            ></ng-template>
          </div>
        </div></div></mat-radio-group
  ></ng-container>
</ng-template>
