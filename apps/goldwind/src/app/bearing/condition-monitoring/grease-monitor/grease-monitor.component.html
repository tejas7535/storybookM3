<ng-container *ngIf="!(loading$ | ngrxPush); else loading">
  <mat-card
    *transloco="let t; read: 'greaseStatus'"
    class="full-height-card flex flex-col h-full w-full"
  >
    <div class="flex justify-between">
      <mat-card-header>
        <mat-card-title fxLayout="row" layout-align="center center">
          <mat-icon>opacity</mat-icon>
          <span>{{ t('title') }}</span>
        </mat-card-title>
        <mat-card-subtitle *transloco="let t; read: 'bearing'">
          <div class="flex flex-col">
            <span>
              {{
                (greaseTimeStamp$ | ngrxPush) || t('noTimestampAvailable')
              }}</span
            >
            <span> {{ t('updateFrequency') }}: {{ refresh }}s</span>
          </div>
        </mat-card-subtitle>
      </mat-card-header>
      <goldwind-sensor
        [type]="type"
        [sensor]="sensor"
        (sensorToggle)="getGreaseStatusLatestGraphData($event)"
      ></goldwind-sensor>
    </div>
    <mat-card-content>
      <div
        class="
          flex flex-col
          md:flex-row
          gap-2
          items-center
          text-center
          justify-center
        "
      >
        <div class="flex flex-col w-1/3 justify-between text-center">
          <div class="gauge_title">
            <span>{{ t('waterContent') }}</span>
          </div>
          <div
            fxFlex
            echarts
            [options]="chartOptions"
            [merge]="
              this.getGreaseStatusLatestWaterContentGraphData$ | ngrxPush
            "
            class="grease-monitor-chart dashboard-echart"
          ></div>
        </div>
        <div class="flex w-1/3 flex-col justify-between text-center">
          <div class="gauge_title">
            <span
              ><span>{{ t('temperatureOptics') }}</span></span
            >
          </div>
          <div
            fxFlex
            echarts
            [options]="chartOptions"
            [merge]="
              this.getGreaseStatusLatestTemperatureOpticsGraphData$ | ngrxPush
            "
            class="grease-monitor-chart dashboard-echart"
          ></div>
        </div>
        <div class="flex w-1/3 flex-col justify-between text-center">
          <div class="gauge_title">
            <span
              ><span>{{ t('deterioration') }}</span></span
            >
          </div>
          <div
            fxFlex
            echarts
            [options]="chartOptions"
            [merge]="
              this.getGreaseStatusLatestDeteriorationGraphData$ | ngrxPush
            "
            class="grease-monitor-chart dashboard-echart"
          ></div>
        </div>
      </div>
    </mat-card-content>
  </mat-card>
</ng-container>

<ng-template #loading>
  <mat-card class="full-height-card placeholder-item"></mat-card>
</ng-template>
