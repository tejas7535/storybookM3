<div class="flex flex-col sm:flex-row sm:flex gap-4 h-full max-h-full">
  <mat-card class="w-full sm:w-3/5 md:w-2/5 max-h-full overflow-y-auto">
    <h6 class="font-medium text-2xl leading-6 text-dark my-4">Date Picker</h6>
    <goldwind-date-range
      [interval]="interval$ | ngrxPush"
      (rangeChange)="setInterval($event)"
    ></goldwind-date-range>
    <ng-container *ngrxLet="graphData$ as graphData">
      <goldwind-empty-graph [graphData]="graphData"></goldwind-empty-graph>
    </ng-container>
    <div class="flex flex-col h-14 max-h-full">
      <h6 class="font-medium text-2xl leading-6 text-dark mb-4 mt-8">
        {{ translate('linechart.pleaseSelectTrendsToShow') }}
      </h6>
      <mat-tree
        #tree
        [dataSource]="dataSource"
        [treeControl]="treeControl"
        class="h-full max-h-full"
        [formGroup]="displayForm"
      >
        <mat-tree-node *matTreeNodeDef="let node" matTreeNodePadding>
          <mat-checkbox
            [formControlName]="node.formControl"
            [color]="'primary'"
          >
            {{ translate(this.translateKey + '.' + node.label) }}
          </mat-checkbox>
        </mat-tree-node>
        <mat-tree-node
          *matTreeNodeDef="let node; when: hasChild"
          matTreeNodePadding
        >
          <mat-checkbox
            [color]="'primary'"
            [formControl]="node.formControl"
            [indeterminate]="getIndeterminate(node.name)"
          >
            <button
              mat-icon-button
              matTreeNodeToggle
              [attr.aria-label]="'Toggle ' + node.name"
            >
              <mat-icon class="mat-icon-rtl-mirror">
                {{
                  treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'
                }}
              </mat-icon>
            </button>
            {{ translate(this.translateKey + '.' + node.name) }}
          </mat-checkbox>
        </mat-tree-node>
      </mat-tree>
    </div>
  </mat-card>

  <mat-card class="w-full h-full lg:w-full">
    <h6 class="font-medium text-2xl leading-6 text-dark my-4">
      {{ translate(this.translateKey + '.' + 'title') }}
    </h6>

    <ng-container *ngIf="graphData$ | ngrxPush as graphData; else loading">
      <div
        class="flex w-full h-5/6"
        echarts
        [options]="chartOptions"
        [merge]="graphData"
      ></div>
    </ng-container>
    <ng-template #loading>
      <div class="flex placeholder-item"></div>
    </ng-template>
  </mat-card>
</div>
