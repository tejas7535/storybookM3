<ng-container
  *transloco="let tr; read: 'materialsSupplierDatabase.contactdialog'"
>
  <div mat-dialog-title class="!px-0">
    <div
      class="inline-flex w-full flex-row content-around justify-between pl-4 pb-3 pr-2"
    >
      <div class="text-h6 text-high-emphasis my-auto">
        {{ tr('title') }}
      </div>
      <button mat-icon-button (click)="closeDialog()">
        <mat-icon class="text-medium-emphasis">close</mat-icon>
      </button>
    </div>
  </div>
  <div mat-dialog-content class="!px-0">
    <ng-container
      *ngTemplateOutlet="
        contactBlock;
        context: {
          translationKey: 'sustainability',
          contacts: getContacts().contactSustainability
        }
      "
    ></ng-container>
    <ng-container
      *ngTemplateOutlet="
        contactBlock;
        context: {
          translationKey: 'development',
          contacts: getContacts().contactSupplierDevelopment
        }
      "
    ></ng-container>
    <ng-template
      #contactBlock
      let-translationKey="translationKey"
      let-contacts="contacts"
    >
      <div
        *transloco="
          let t;
          read: 'materialsSupplierDatabase.contactdialog.' + translationKey
        "
        class="pt-2 pb-4"
      >
        <div class="pl-4">{{ t('title') }}</div>
        <div class="flex-5 grid">
          @for (contact of contacts || []; track contact) {
            <div
              class="flex flex-row gap-4 text-medium-emphasis text-body-2 p-4 py-2 border-b border-b-border"
            >
              <mat-icon class="flex-none">person</mat-icon>
              <span class="basis-1/3 text-subtitle-2 font-bold mt-1">
                {{ t('section.' + contact.section) }}:
              </span>
              <span class="flex-grow mt-1">{{
                t('name.' + contact.name)
              }}</span>
              @if (contact.email) {
                <!-- send mail -->
                <a
                  class="flex-none"
                  href="mailto:{{ t('email.' + contact.email) }}"
                  (click)="trackEmail()"
                >
                  <mat-icon class="text-link">mail</mat-icon>
                </a>
                <!-- call via teams -->
                <a
                  class="flex-none"
                  href="https://teams.microsoft.com/l/call/0/0?users={{
                    t('email.' + contact.email)
                  }}"
                  (click)="trackTeams()"
                  target="_blank"
                >
                  <mat-icon class="text-link">call</mat-icon>
                </a>
              }
            </div>
          }
        </div>
      </div>
    </ng-template>

    <mat-dialog-actions>
      <div class="flex px-2 gap-2">
        <div class="flex-grow text-subtitle-2">{{ tr('learnMoreText') }}</div>
        <div class="flex-none">
          <a
            mat-raised-button
            class="!text-link"
            [href]="tr('learnMoreUri')"
            target="_blank"
          >
            <mat-icon>open_in_new</mat-icon>
            {{ tr('learnMoreLink') }}
          </a>
        </div>
      </div>
    </mat-dialog-actions>
  </div>
</ng-container>
