<mac-base-dialog
  *transloco="let t; read: 'materialsSupplierDatabase.mainTable.dialog'"
  [txtTitle]="getTitle()"
  [txtCancel]="t('cancel')"
  [txtConfirm]="
    isEditDialog() && !isCopyDialog() ? t('updateMaterial') : t('addMaterial')
  "
  [isAddDialog]="isCopyDialog() || !isEditDialog()"
  [valid]="isValidDialog() && (isCo2Valid$ | ngrxPush)"
  (accept)="confirmMaterial($event)"
  (minimize)="minimizeDialog()"
  (cancel)="cancelDialog()"
>
  <div class="flex flex-col gap-y-3">
    <ng-container
      *ngIf="!(dialogLoading$ | ngrxPush) && !(editLoading$ | ngrxPush)"
    >
      <ng-container *ngrxLet="hintData$ as hintData">
        <div class="text-subtitle-2 text-high-emphasis">
          {{ t('materialStandardTitle') }}
        </div>
        <div class="flex flex-row gap-x-6">
          <mac-material-standard
            class="w-full"
            [readonly]="isEditDialog() && !isCopyDialog()"
            [materialStandardIdControl]="materialStandardIdControl"
            [standardDocumentsControl]="standardDocumentsControl"
            [materialNamesControl]="materialNamesControl"
            [column]="getColumn()"
            macMaterialDialogBasePart
          ></mac-material-standard>
        </div>
        <ng-container>
          <!-- Supplier Block -->
          <div class="text-subtitle-2 text-high-emphasis">
            {{ t('supplierInformationTitle') }}
          </div>
          <mac-manufacturer-supplier
            [readonly]="isEditDialog() && !isCopyDialog()"
            [manufacturerSupplierIdControl]="manufacturerSupplierIdControl"
            [supplierControl]="supplierControl"
            [supplierPlantControl]="supplierPlantControl"
            [supplierCountryControl]="supplierCountryControl"
            [column]="getColumn()"
            macMaterialDialogBasePart
          ></mac-manufacturer-supplier>
          <div class="text-subtitle-2 text-high-emphasis">
            {{ t('co2AndProductInformationTitle') }}
          </div>
          <mac-co2-component
            [co2Scope1Control]="co2Scope1Control"
            [co2Scope2Control]="co2Scope2Control"
            [co2Scope3Control]="co2Scope3Control"
            [co2TotalControl]="co2TotalControl"
            [co2ClassificationControl]="co2ClassificationControl"
            [releaseRestrictionsControl]="releaseRestrictionsControl"
            [co2Scope1Hint]="getHint(hintData, 'co2Scope1')"
            [co2Scope2Hint]="getHint(hintData, 'co2Scope2')"
            [co2Scope3Hint]="getHint(hintData, 'co2Scope3')"
            [co2TotalHint]="getHint(hintData, 'co2PerTon')"
            [co2ClassificationHint]="getHint(hintData, 'co2Classification')"
            [releaseRestrictionsHint]="getHint(hintData, 'releaseRestrictions')"
            [column]="getColumn()"
            macMaterialDialogBasePart
          >
            <mat-error
              afterCo2Scope
              class="text-caption text-center"
              *ngIf="isBulkEditDialog() && !(isCo2Valid$ | ngrxPush)"
              >{{ t('error.co2TooLowBulkEdit') }}
            </mat-error>
            <ng-container preCo2Classification>
              <schaeffler-select
                appearance="outline"
                class="w-auto"
                [stringOptions]="categories$ | ngrxPush"
                [control]="categoriesControl"
                [filterFn]="filterFn"
                [label]="t('productCategory')"
                [formFieldHint]="getHint(hintData, 'productCategory')"
                [showTriggerTooltip]="true"
                triggerTooltipDelay="1500"
                tooltipPosition="right"
                name="productCategoryText"
                #dialogControl
              ></schaeffler-select>
            </ng-container>
          </mac-co2-component>
        </ng-container>
      </ng-container>
    </ng-container>
  </div>
</mac-base-dialog>
