<mat-form-field
  appearance="fill"
  class="!w-full"
  *transloco="let t; read: 'search.referenceTypesFilters'"
>
  <mat-label>
    <mat-icon *ngIf="filter?.disabled">help_outline</mat-icon>
    {{ t('names.' + filter?.name) }}
  </mat-label>
  <mat-select
    [formControl]="form"
    [disabled]="filter?.disabled"
    panelClass="range-menu"
    disableOptionCentering
    matTooltipPosition="below"
    [matTooltip]="disabledFilterHint"
    [matTooltipDisabled]="!filter?.disabled"
  >
    <mat-select-trigger>
      {{ filter | rangeFilterValue }}
    </mat-select-trigger>
    <mat-option class="!h-0" value="selected"></mat-option>
    <div class="flex flex-col p-2">
      <div class="label-form-field">
        <div class="text-caption">Min. {{ t('names.' + filter?.name) }}</div>
        <mat-form-field class="form-field">
          <input
            #minInput
            matInput
            autocomplete="off"
            [value]="
              filter.minSelected
                ? (filter.minSelected | translocoDecimal: decimalNumberFormat)
                : (filter.min | translocoDecimal: decimalNumberFormat)
            "
            [max]="filter.max"
            [min]="filter.min"
            (change)="update(inputType.Min, minInput.value)"
          />
          <div *ngIf="filter.unit" matSuffix>&nbsp;{{ filter.unit }}</div>
        </mat-form-field>
      </div>
      <div class="slider-icon pb-3">
        <mat-slider
          #minSlider
          discrete
          color="primary"
          class="flex-1"
          [max]="filter.max"
          [min]="filter.min"
          [displayWith]="formatSliderThumbLabel"
          ><input
            #minSliderThumb
            matSliderThumb
            [value]="filter.minSelected ? filter.minSelected : filter.min"
            (change)="
              update(
                inputType.Min,
                {
                  source: minSliderThumb,
                  parent: minSlider,
                  value: minSliderThumb.value
                }.value
              )
            "
          />
        </mat-slider>
        <mat-icon class="cursor-pointer" (click)="resetInput(inputType.Min)"
          >restore</mat-icon
        >
      </div>
      <div class="label-form-field">
        <div class="text-caption">Max. {{ t('names.' + filter?.name) }}</div>
        <mat-form-field class="form-field">
          <input
            #maxInput
            matInput
            autocomplete="off"
            [value]="
              filter.maxSelected
                ? (filter.maxSelected | translocoDecimal: decimalNumberFormat)
                : (filter.max | translocoDecimal: decimalNumberFormat)
            "
            [max]="filter.max"
            [min]="filter.min"
            (change)="update(inputType.Max, maxInput.value)"
          />
          <div *ngIf="filter.unit" matSuffix>&nbsp;{{ filter.unit }}</div>
        </mat-form-field>
      </div>
      <div class="slider-icon">
        <mat-slider
          #maxSlider
          discrete
          color="primary"
          class="flex-1"
          [max]="filter.max"
          [min]="filter.min"
          [displayWith]="formatSliderThumbLabel"
          ><input
            #maxSliderThumb
            matSliderThumb
            [value]="filter.maxSelected ? filter.maxSelected : filter.max"
            (change)="
              update(
                inputType.Max,
                {
                  source: maxSliderThumb,
                  parent: maxSlider,
                  value: maxSliderThumb.value
                }.value
              )
            "
          />
        </mat-slider>
        <mat-icon class="cursor-pointer" (click)="resetInput(inputType.Max)"
          >restore</mat-icon
        >
      </div>
    </div>
  </mat-select>
</mat-form-field>
