@if (selectableOptionsService.loading$ | ngrxPush) {
  <div>
    <schaeffler-loading-spinner [useBearingLoadingSpinner]="true" />
  </div>
} @else {
  <div *transloco="let t">
    <h2 class="text-title-large mb-8">{{ t('tabbarMenu.overview.label') }}</h2>
    <d360-overview-filter
      (onFilterChange)="overviewFilterValue.set($event)"
      (onReset)="onOverviewFilterReset()"
    />

    <div class="gap-4 pb-4 mt-8">
      <div class="flex flex-row gap-6 justify-between">
        <span class="mt-2">{{ t('overview.yourCustomer.headline') }}</span>
        <span class="flex flex-row justify-center align-middle">
          <mat-slide-toggle
            [checked]="isAssignedToMe()"
            (change)="onAssignedToggleChange($event.checked)"
            class="mt-1"
            labelPosition="before"
            hideIcon="true"
          >
            <span class="pr-1">{{
              t('overview.yourCustomer.assignedToYou')
            }}</span>
          </mat-slide-toggle>
        </span>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 flex-col gap-4 mt-4">
        <d360-styled-section class="h-full w-full" [suppressPadding]="true">
          <d360-customer-sales-planning-grid
            [isAssignedToMe]="isAssignedToMe()"
            [gkamNumbers]="gkamFilterIds()"
            [customerNumbers]="customerFilterIds()"
            (selectionChanged)="
              selectedCustomer.set(
                $event
                  ? { id: $event.customerNumber, text: $event.customerName }
                  : null
              )
            "
          />
        </d360-styled-section>
        <d360-styled-section class="h-full w-full" [fullHeight]="true">
          <d360-forecast-chart
            class="forecast-chart h-full"
            [currency]="currencyService.getCurrentCurrency() | ngrxPush"
            [columnFilters]="{}"
            [globalSelectionState]="globalSelection()"
            [chartIdentifier]="'overview-page'"
            [defaultPeriodType]="PeriodType.MONTHLY"
            [isAssignedToMe]="isAssignedToMe()"
            [customerFilter]="selectedCustomer()"
            [disablePreview]="true"
          />
        </d360-styled-section>
      </div>
    </div>

    <mat-divider></mat-divider>

    <div class="gap-6 pb-4 pt-8">
      <div class="flex flex-row gap-4 justify-between">
        <span class="mt-2">{{ t('overview.yourTasks.headline') }}</span>
        <d360-priority-dropdown
          (selectionChange)="selectedPriorities.set($event)"
        />
      </div>

      <div class="your-tasks flex md:flex-row flex-col gap-4">
        <d360-styled-section class="card h-full md:w-1/2 w-full mb-1">
          <d360-task-priority-grid
            [headline]="t('validation_of_demand.title')"
            [gkamNumbers]="gkamFilterIds()"
            [customers]="customerFilterIds()"
            [openFunction]="OpenFunction.Validation_Of_Demand"
            [priorities]="selectedPriorities()"
          />
        </d360-styled-section>

        <d360-styled-section class="card h-full md:w-1/2 w-full mb-1">
          <d360-task-priority-grid
            [headline]="t('tabbarMenu.customer-material-portfolio.label')"
            [openFunction]="OpenFunction.Customer_Material_Portfolio"
            [gkamNumbers]="gkamFilterIds()"
            [customers]="customerFilterIds()"
            [priorities]="selectedPriorities()"
          />
        </d360-styled-section>
      </div>
    </div>
  </div>
}
