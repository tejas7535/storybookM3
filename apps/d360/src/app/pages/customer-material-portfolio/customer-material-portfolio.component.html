<div *transloco="let t">
  <!--  TODO add open property with false-->
  <d360-global-selection-criteria
    (onGlobalSelectionChange)="onUpdateGlobalSelection($event)"
  ></d360-global-selection-criteria>
  <d360-styled-section [last]="true" [grow]="true" style="position: relative">
    <h2>{{ t('customer_material_portfolio.title', {}) }}</h2>
    @if (
      globalSelectionStatus === GlobalSelectionStatus.DATA_AVAILABLE &&
      customerData() &&
      selectedCustomer() &&
      globalSelection
    ) {
      <d360-header-action-bar>
        <div d360HeaderActionBarButtons>
          <d360-action-button
            (click)="handleSinglePhaseIn()"
            color="primary"
            variant="mat-fab"
            icon="add"
          ></d360-action-button>
          <d360-action-button
            (click)="handleMultiPhaseIn()"
            color="secondary"
            variant="mat-fab"
            icon="menu"
          ></d360-action-button>
        </div>
        <div d360HeaderActionBarChildren>
          <!--          // TODO check if customer-drop down or app-single-autocomplete-pre-loaded should be used like in validation of demand action bar -->
          <!--          <d360-customer-drop-down [customers]="customerData" [fC]="customerControl" [fG]="formGroup"></d360-customer-drop-down>-->
          <d360-single-autocomplete-pre-loaded
            [control]="customerControl"
            [form]="formGroup"
            [optionsLoadingResult]="customerSelectableValues"
            [label]="t('validation_of_demand.customer', {})"
            class="w-72"
            [displayFn]="displayFnUnited"
            (selectionChange)="handleCustomerChange($event)"
          >
          </d360-single-autocomplete-pre-loaded>
        </div>
      </d360-header-action-bar>
      <d360-customer-material-portfolio-table
        [filterModel]=""
        [selectedCustomer]="selectedCustomer()"
        [globalSelection]="globalSelection"
      ></d360-customer-material-portfolio-table>
    } @else if (
      globalSelectionStatus === GlobalSelectionStatus.DATA_LOADING || loading()
    ) {
      <schaeffler-loading-spinner
        [useBearingLoadingSpinner]="true"
      ></schaeffler-loading-spinner>
    } @else if (
      globalSelectionStatus === GlobalSelectionStatus.DATA_NO_RESULTS
    ) {
      <d360-data-hint [text]="t('hint.noData', {})"></d360-data-hint>
    } @else if (
      globalSelectionStatus === GlobalSelectionStatus.DATA_NOTHING_SELECTED
    ) {
      <d360-data-hint [text]="t('hint.selectData', {})"></d360-data-hint>
    } @else if (globalSelectionStatus === GlobalSelectionStatus.DATA_ERROR) {
      <d360-data-hint [text]="t('hint.errorLoadingData', {})"></d360-data-hint>
    }
  </d360-styled-section>
</div>
