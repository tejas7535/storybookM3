@if (items.length > 0) {
  <mat-button-toggle-group
    [value]="active"
    (change)="onViewSelect($event)"
    class="!border-border !rounded-b-none !rounded-t-xl"
    [hideSingleSelectionIndicator]="true"
    [ngClass]="{
      '!border-b-0': !displayBorderBottom,
    }"
  >
    @for (item of items; track item.id; let i = $index) {
      <mat-button-toggle
        class="h-8 !bg-[#fafafa] px-1 !leading-8 !text-on-surface-variant [&>button>span]:!text-body-small [&>.mat-button-toggle-focus-overlay]:!hidden !border-border"
        [value]="item"
        [ngClass]="{
          '!bg-secondary-legacy !font-medium !text-on-surface':
            item.id === active.id,
          'hover:!font-medium hover:!text-on-surface ': !item.disabled,
          '!text-on-surface opacity-[0.38]': item.disabled,
        }"
        [disabled]="item.disabled"
        [attr.cy-view-toggle-id]="item.id"
        [attr.cy-view-toggle-status]="
          item.id === active.id
            ? viewToggleStatus.ACTIVE
            : item.disabled
              ? viewToggleStatus.DISABLED
              : viewToggleStatus.INACTIVE
        "
      >
        <div
          class="flex items-center justify-between"
          [ngClass]="{ 'mt-1': !item.title }"
          (dblclick)="onDoubleClick($event, item.id)"
        >
          @if (item.title) {
            <span
              [ngClass]="{
                '!cursor-not-allowed ': item.disabled,
              }"
            >
              {{ item.title }}
            </span>
          }
          @if (item.icons && item.icons.length > 0) {
            <div class="flex" [ngClass]="{ 'ml-1': item.title }">
              @for (icon of item.icons; track icon.name) {
                <button
                  mat-icon-button
                  class="flex"
                  [ngClass]="{
                    '!text-on-surface': item.id === active.id,
                    '!text-on-surface-variant ': item.id !== active.id,
                    '!text-on-surface !opacity-[0.38]': icon.disabled,
                  }"
                  (click)="onIconClicked($event, item.id, icon.name)"
                  [disabled]="icon.disabled"
                >
                  <mat-icon class="scale-50">{{ icon.name }}</mat-icon>
                </button>
              }
            </div>
          }
        </div>
      </mat-button-toggle>
    }
  </mat-button-toggle-group>
}
