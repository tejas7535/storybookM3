<div class="relative h-full">
  <mat-card
    class="h-full p-4"
    (click)="isClickable ? toggle(false, true) : undefined"
  >
    <img mat-card-image [src]="img" class="max-w-none" />
    <div class="absolute right-0 top-0">
      @if (active) {
        <button
          mat-icon-button
          (click)="deactivate()"
          class="focus:outline-none"
        >
          <mat-icon class="text-medium-emphasis">clear</mat-icon>
        </button>
      }
    </div>
    <h6 class="mb-3">{{ title }}</h6>
    <mat-card-content>
      @if (active) {
        <ng-content select="[card-content]"></ng-content>
      }
    </mat-card-content>
    <div
      [ngClass]="
        !hideActionsOnActive || (hideActionsOnActive && !active) ? 'mb-12' : ''
      "
    ></div>
    @if (!hideActionsOnActive || (hideActionsOnActive && !active)) {
      <mat-card-actions class="absolute bottom-0 !p-0">
        <ng-content select="[card-actions]"></ng-content>
        @for (action of actions; track $index) {
          <schaeffler-picture-card-action
            [text]="action.text"
            [disabled]="action.disabled"
            (click)="
              action.toggleAction || action.selectAction
                ? toggle(
                    action.toggleAction ? !active : false,
                    action.selectAction ? !selected : false
                  )
                : action.click
            "
          ></schaeffler-picture-card-action>
        }
      </mat-card-actions>
    }
  </mat-card>
  <div
    class="absolute top-0 bottom-0 w-full rounded hover:cursor-pointer hover:bg-hover-overlay focus:cursor-pointer focus:bg-focus-overlay"
    [ngClass]="{ 'bg-disabled-overlay': selected }"
  >
    @if (selected) {
      <mat-icon class="absolute top-2 right-2 text-link" filled
        >check_circle</mat-icon
      >
    }
  </div>
</div>
